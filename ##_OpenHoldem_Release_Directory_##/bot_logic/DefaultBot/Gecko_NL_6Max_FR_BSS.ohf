##f$Gecko_notes##
//*****************************************************************************
//
// OpenPPL default bot
//   This bot-logic will be executed on undefined situations
//
// OpenPPL is part of the OpenHoldem project
//   Source code:           http://code.google.com/p/openholdembot/
//   Download page:         https://sites.google.com/site/openholdempokerbot/downloads
//   Forums:                http://www.maxinmontreal.com/forums/index.php
//   Licensed under GPL v3: http://www.gnu.org/licenses/gpl.html
//
// The original PPL (Poker Programming Language) got invented by
//   Shanky Bonusbots:      http://bonusbots.com/support/index.php
//
// Required OpenHoldem version: 12.0.0 or later
//
// Main author: Gecko 
//
// Co-author:   ThehighFish
//   (adaptions for OpenHoldem 12.x, documentation, simplification,          
//    extending preflop to full-ring)
//
//*****************************************************************************
//
// TECHNICAL CHANGES:
//   * OpenPPL-functions f$preflop..f$river added (all empty)
//     to make Gecko OpenPPL-compatible
//   * Renaming f$preflop,... by Gecko_6Max_FR_NL_BSS_Preflop,
//     because that's how the default-bot will address Gecko-logic.
//   * Splitting call formula
//     - introducing f$call_nuts, f$call_minbets, call_potcommitted
//     - removed superfluous backup action for betsizing (now built-in)
//     - reused f$call_preflop..f$call_river
//   * Betsizing
//     - removed f$srai (called "Bet/raise strategy", returning true/false,
//       despite it should return how much) and distributed it to f$preflop..f$river  
//     - moved rule for strong set to f$flop_turn_raise_strong_set
//     - renamed f$swag (unsupported) to f$best_netsize
//   * Replaced ##nit## 1000 by f$prwin_number_of_iterations 50.000
//     for more precise simulations
//   * Renamed f$P to f$prwin_number_of_opponents
//   * Removed unused default formulas (dll, defcon, f$debug, ...)
//   * Removed f$play formula (always play on)
//     as f$sitout, f$close, etc. can be handled by the user if desired.
//   * Replaced "islist..." sy,bols by "list..."
//   * Replaced didswag by didbetsize
//   * Simplified the PokerTracker-functions
//     f$pt_pfr, f$pt_vpip, f$pt_flopaf, f$pt_turnaf, f$pt_riveraf, f$pt_wtsd
//     f$pt_vpip, f$pt_pfr, pt_fbbts, pt_fsbts
//     because headsup-stats are now availabele more easily
//   * Uniform naming for f$pt_-functions, no longer f$pt_
//   * Adapted names of Pokertracker symbols to new naming conventions
//     - pt_flop_af   -> pr_flop_af          (same for turn and river)
//     - pt_fbbts     -> pt_bb_fold_to_steal (same for sb)
//     - pt_hands_raischair -> pt_hands_raischair  (same for all other ptr_symbols)
//   * Removed duplicate f$pt_-functions
//   * Uniform naming for f$pt_-functions, no longer f$stats
//     Renamed f$pt_raggf to f$PT_Flop_AF_RaisChair (same for turn and river) 
//   * Replaced f$dealposition function by OpenPPL position symbol like InBigBlind
//   * Replaced br by betround by even more verbosity: IsFlop, ...
//   * Renamed $$AA, $$KK to more verbose hand$AA, hand$KK
//   * Replaced nopponentsraising by Raises.
//     Thank god Gecko had already created more abstract functions
//     f$Preflop_Multiple_Raisers and f$BettingAction_Single_Raiser_Before_Us
//     that made the conversion eady (no "blind-raisers") 
//   * Changed handlists from WinHoldem to OpenHoldem-style format, e.g.
//       AK  ->  AKs
//       KA  ->  AKo    
//   * Removed unused f$BettingAction_Freeplay
//     OpenHoldem reported an undefined list40 there
//     and it turned out the complete function 
//     was not in use.
//   * Removed unused function f$Player_category
//   * Removed unused f$Player1..f$Player14 functions
//     (opponent modelling from a different Gecko-bot)
//   * Removed unused function f$raisbits1 and f$memory
//   * Removed unused function f$currentbetopponent
//   * Simplified f$dealpositionrais, extended it to FR-games
//     and renamed it to f$logicalpositionrais
//   * Removed unusef f$pt_pfrr and f$pt_pfrrr
//   * Removed f$oppchair (only used in f$pt_pfrr and f$pt_pfrrr)
//   * Introduced f$pt_icon0..f$pt_icon08 for all chairs
//     for opponent-modelling as PokerTracker does no longer support
//     the auto-rate-icon.
//     Geckos auto-rate-rules are documented below.
//   * Removed some unused PT-code, that was commented out
//     (f$Punten_Limper_Smallblind1, f$Punten_Preflop_Cutoff, ...
//     that created a combined score for multiple players
//     based on different auto-rate-rules)
//   * Simplified f$stackopponent, f$stackraiser, f$pt_hands,
//     f$mycurrentbet, currentbet_raischair which now use the
//     multiplexer-engine instead of considering all possible chairs.
//   * Resolved some naming conflict with validator-postfixes.
//   * Removed the function f$betsizing_strategy that
//     implemented some redundant "don't-raise"-logic
//     when we already decided to raise.
//   * Introducing functions f$BetsizePreflop,
//     f$BetsizeFlopHeadsup, f$BetsizeFlopMultiway, 
//     f$BetsizeTurnHeadsup, f$BetsizeTurnMultiway, 
//     f$BetsizeRiverHeadsup, f$BetsizeRiverMultiway
//     to structure f$Betsize_Adjusted better.
//   * Changing (nearly) all betsizing to Betpot-actions.
//   * Removing f$best_betsize and f$best_betsize_in_dollars 
//     and renaming f$Betsize_Adjusted to f%NestBetsize
//     as the betsize calculations became now superfluous.
//   * Making f$allin_on_betsize_balance_ratio
//     dependent on effective stacks headsup.
//     This was formerly part of Geckos betsizing-logic.  
//   * Removed now unused f$balance, formerly used to
//     calculate the betsize for allins.  
//   * Renamed symbols like nbetsround1 to nbetsround_preflop
//     for more verbosity.
//   * Replaced f$Position_Middle, f$Position_Early and f$Position_Late 
//     by OpenPPL position symbols
//   * Removed duplicate f$pt_vpip, $pt_pfr
//   * Removed f$BettingAction_Raisers_Behind_Us which became superfluous  
//     after the multiple use-cases of list100 got distinguished.
//   * Replaces f$twopair by TwoPairOnBoard
//   * Replaced "nrankedcommon==2" by PairOnBoard
//   * Replaced "nsuited==4" by HaveFlushDraw
//   * Replaced "nrankedcommon==1" by "NOT PairOnBoard"
//   * Replaced "nstraightcommon < 3" by "NOT StraightPossible"
//   * Replaced "nstraightfillcommon<=2" by Straightpossible
//   * Replaced "nsuitedcommon==3" by FlushPossible
//   * Replaced "nsuitedcommon<3" by "NOT FlushPossible"
//   * Removed now unused function f$realbalance, formerly used for allins
//   * Introduced f$effective_balance_to_call_ratio to make the code simpler
//     and more verbose
//   * Renamed lists
//       listGecko17  -> listGeckoSetMining
//       listGecko300 -> listGeckoLimpMultiway
//       listGecko301 -> listGeckoLimpAgainstOneOpponent
//   * Restructured f$preflop_call, introducing
//       f$preflop_call_for_setmining, f$preflop_call_reraise
//       and f$preflop_limp_good_hand
//   * Introduced f$villain_allin and $villain_potcommitted
//     to make the code more verbose and fixed a bug in the code
//     that detects potcommitted villains.
//   * Replaced f$Position_CutOff, f$Position_Button, f$Position_UTG1, 
//     f$Position_UTG2, f$Position_Blinds, f$Position_SmallBlind, f$Position_BigBlind
//     by OpenPPL-symbols like InCutOff.
//   * Removed 61 unused lists.
//
// LOGICAL CHANGES:
//   * Added f$allin_on_betsize_balance_ration to simplify betsizing.
//   * Added sanity-check that prevents Gecko playing Omaha.
//   * Added f$pt_min_hands_for_opponent_modelling
//     to require a minimal sample-size.
//   * Extended f$prefold to full-ring
//   * introducing f$delay
//   * Added opening-ranges for full-ring
//   * changed all three RaiseMax-actions to RaisePot-actions
//     because some smart people complained that check-raising allin
//     at the turn is too much when we are 10.000 bb deep.
//   * Extended f$prwin_number_of_opponents for potential more 
//     than 7 players postflop (full-ring).
//   * Gecko used list100 for multiple different scenarios.
//     Now introduced
//       listGeckoMultipleRaisers
//       listGeckoSqueeze
//       listGeckoSingleRaiserBehindUs
//       listGeckoMultipleRaisersBehindUs
//     and rewrote f$Preflop_React_To_Reraise to distinguish
//     one or multiple raises behind us and added AKo 
//     to listGeckoSingleRaiserBehindUs.
//   * Introduced f$positional_allin_on_betsize_balance_ratio
//     to go more liberally allin out of position
//     to reduce the disadvantage of position and put more 
//     pressure on the opponent.
//     http://www.maxinmontreal.com/forums/viewtopic.php?f=297&t=21070&p=147907#p147907
//   * Introduced f$required_balance_to_call_ratio_for_setmining
//     which is slightly more conservatice than Gecko 
//     and also considers position.
//     http://www.maxinmontreal.com/forums/viewtopic.php?f=297&t=21070&start=60#p147986
//   * Improved f$BetsizePreflop, now adapting its betsize to position/range
//     when open-raising.
//
//*****************************************************************************
//
// KNOWN WEAKNESSES:
//   * currently uses Geckos 3betting-range against MP2 (UTG short-handed)
//     against all more early positions full-ring.
//
//*****************************************************************************

##Gecko_6Max_FR_NL_BSS_Preflop##
WHEN isomaha Fold FORCE
WHEN f$preflop_raise Return f$BestBetsize FORCE
WHEN f$call_nuts Call FORCE
WHEN f$call_minbets Call FORCE
// No WHEN f$call_potcommitted Call FORCE here.
// AA and KK get handled by f$call_nuts.
// With weaker hands we are already allin (small stack)
// or have enough chips left that we are not committed
WHEN f$preflop_call Call FORCE

##Gecko_6Max_FR_NL_BSS_Flop##
WHEN isomaha Fold FORCE
WHEN f$flop_raise Return f$BestBetsize FORCE
WHEN f$flop_turn_raise_strong_set Return f$BestBetsize FORCE
WHEN f$call_nuts Call FORCE
WHEN f$call_minbets Call FORCE
WHEN f$call_potcommitted Call FORCE 
WHEN f$flop_call Call FORCE

##Gecko_6Max_FR_NL_BSS_Turn##
WHEN isomaha Fold FORCE
WHEN f$turn_raise Return f$BestBetsize FORCE
WHEN f$flop_turn_raise_strong_set Return f$BestBetsize FORCE
WHEN f$call_nuts Call FORCE
WHEN f$call_minbets Call FORCE
WHEN f$call_potcommitted Call FORCE
WHEN f$turn_call Call FORCE

##Gecko_6Max_FR_NL_BSS_River##
WHEN isomaha Fold FORCE
WHEN f$river_raise Return f$BestBetsize FORCE
// No longer going automatically broke with strong sets
WHEN f$call_nuts Call FORCE
WHEN f$call_minbets Call FORCE
WHEN f$call_potcommitted Call FORCE
WHEN f$river_call Call FORCE

##f$positional_allin_on_betsize_balance_ratio##
// As a small improvement we decided that we should
// go more liberally allin out of position
// to reduce the disadvantage of position and put more 
// pressure on the opponent.
// http://www.maxinmontreal.com/forums/viewtopic.php?f=297&t=21070&p=147907#p147907
WHEN (Position = Last) RETURN 0.50 FORCE
WHEN Others RETURN 0.40 FORCE

##f$allin_on_betsize_balance_ratio##
// Not present in Geckos original bot for OpenHoldem 2.x,
// His code suggests that he wanted it to be 0.66,
// but as Gecko used raise-by-semantics and we use raise-to
// about 0.50 looks like a more appropriate value,
// firther improving it to 40% OOP,
// Fail-safe for mis-scraped stacks
WHEN (StackSize <= 0) RETURN 0.00 FORCE
WHEN NOT HandIsHeadsup RETURN f$positional_allin_on_betsize_balance_ratio FORCE
// Sole opponent already allin or mis-scraped opponents stack
WHEN (StackSize_headsupchair <= 0) RETURN f$positional_allin_on_betsize_balance_ratio FORCE
// Opponents stack larger than ours: normal behaviour
WHEN (StackSize_headsupchair >= StackSize) RETURN f$positional_allin_on_betsize_balance_ratio FORCE
// Single opponent with smaller stack.
// Go more lightly allin if our bet is more than 50% of his stack.
WHEN Others RETURN (f$positional_allin_on_betsize_balance_ratio * (StackSize_headsupchair / StackSize)) FORCE

##f$call_nuts##
// Basic calls with nuts or free to check
WHEN [prwin>=0.98] RETURN true FORCE
WHEN [call<=0.001] RETURN true FORCE
WHEN [IsPreflop AND (hand$AA OR hand$KK)] RETURN true FORCE

##f$call_minbets##
[ IsPostflop && call<=bblind && nbetsround_preflop>1 && f$prwin>.15 ] ? 1 :
[ IsPostflop && call<=bblind && pot>6*bblind && f$prwin>.50  ] ? 1 : 0

##f$call_potcommitted##
[ IsPostflop && f$committed ] 

##f$flop_turn_raise_strong_set##
[ IsPostflop AND NOT IsRiver AND HaveSet AND nsuitedcommon<4 AND nstraightcommon<4 AND NOT PairOnBoard ] 

##f$prwin_number_of_iterations##
50000

##f$prwin_number_of_opponents##
// Values will be rounded down, but we prefer to distinguish these cases
nplayersplaying==2 && nplayersround_flop<=2 ? 1.00 :
nplayersplaying==2 && nplayersround_flop==3 ? 1.50 :
nplayersplaying==2 && nplayersround_flop==4 ? 2.25 :
nplayersplaying==2 && nplayersround_flop==5 ? 2.50 :
nplayersplaying==2 && nplayersround_flop>=6 ? 2.25 :
nplayersplaying==3 && nplayersround_flop<=3 ? 1.33 :
nplayersplaying==3 && nplayersround_flop==4 ? 2.00 :
nplayersplaying==3 && nplayersround_flop==5 ? 2.66 :
nplayersplaying==3 && nplayersround_flop>=6 ? 3.00 :
nplayersplaying==4 && nplayersround_flop<=4 ? 2.50 :
nplayersplaying==4 && nplayersround_flop==5 ? 2.75 :
nplayersplaying==4 && nplayersround_flop>=6 ? 3.00 :
nplayersplaying==5 && nplayersround_flop<=5 ? 3.25 :
nplayersplaying==5 && nplayersround_flop>=6 ? 3.33 :
nplayersplaying==6 && nplayersround_flop<=6 ? 3.50 : 
// Extension for more than 6 players
nplayersplaying==6 && nplayersround_flop>=6 ? 4.00 : 
nplayersplaying>=7 && nplayersround_flop>=7 ? 4.50 : 
// Geckos default
1

##f$delay##
// Rendom delay of 0..3000 milli-seconds
Random * 30

##f$prefold##
WHEN IsPostflop    RETURN false FORCE
WHEN (call < 0.01) RETURN false FORCE
WHEN (InBigBlind        AND NOT listGecko07)  RETURN true FORCE
WHEN (InSmallBlind      AND NOT listGecko900) RETURN true FORCE
WHEN (InButton          AND NOT listGecko900) RETURN true FORCE               
WHEN (InCutOff          AND NOT listGecko05)  RETURN true FORCE
WHEN (InMiddlePosition3 AND NOT listGecko02)  RETURN true FORCE
WHEN (InMiddlePosition2 AND NOT listGecko01)  RETURN true FORCE
// Extended to full-ring
// Simply assuming we can fold in early position as much as in MP2
WHEN (Others            AND NOT listGecko01)  RETURN true FORCE

##f$preflop_raise##
   f$Preflop_First_In
OR f$Preflop_Raise_After_One_Limper
OR f$Preflop_Raise_After_Two_Limpers
OR f$Preflop_Raise_After_Three_Limpers
OR f$Preflop_Raiser_In_Front_Of_Me
OR f$Preflop_Raiser_And_Callers_In_Front_Of_Me
OR f$Preflop_Multiple_Raisers
OR f$Preflop_React_To_Reraise

##f$pt_pfr##
WHEN NOT HandIsHeadsup RETURN 0 FORCE
WHEN Others RETURN pt_pfr_headsupchair FORCE

##f$pt_vpip##
WHEN NOT HandIsHeadsup RETURN 0 FORCE
WHEN Others RETURN pt_vpip_headsupchair FORCE

##f$pt_flopaf##
WHEN NOT HandIsHeadsup RETURN 0 FORCE
WHEN Others RETURN pt_flop_af_headsupchair FORCE

##f$pt_turnaf##
WHEN NOT HandIsHeadsup RETURN 0 FORCE
WHEN Others RETURN pt_turn_af_headsupchair FORCE

##f$pt_riveraf##
WHEN NOT HandIsHeadsup RETURN 0 FORCE
WHEN Others RETURN pt_river_af_headsupchair FORCE

##f$pt_fbbts##
pt_bb_fold_to_steal_headsupchair

##f$pt_fsbts##
pt_sb_fold_to_steal_headsupchair

##f$pt_wtsd##
pt_wtsd_headsupchair

##f$pt_hands##
pt_hands_headsupchair

##f$PT_Flop_AF_RaisChair##
// !!! name it "adjusted" !!!
(pt_flop_af_raischair*(pt_wtsd_raischair*4))

##f$PT_Turn_AF_RaisChair##
(pt_turn_af_raischair*(pt_wtsd_raischair*4))

##f$PT_River_AF_RaisChair##
(pt_river_af_raischair*(pt_wtsd_raischair*4))

##f$pt_min_hands_for_opponent_modelling##
50

##f$draws##
   (!TwoPairOnBoard && HaveFlushDraw && nsuitedcommon==2 && nstraight==4 && NOT StraightPossible && !f$wheeldraw && NOT PairOnBoard) 
|| (!TwoPairOnBoard && HaveFlushDraw && FlushPossible && nstraight==4 && !f$wheeldraw && `((~srankbits&0x7fff)>>srankhiplayer)<=3 && NOT StraightPossible && NOT PairOnBoard) 
|| (IsFlop && !TwoPairOnBoard && HaveFlushDraw && nsuitedcommon==2 && nstraight==4 && !f$wheeldraw && NOT StraightPossible && PairOnBoard) 
|| (IsFlop && !TwoPairOnBoard && HaveFlushDraw && FlushPossible && nstraight==4 && !f$wheeldraw && `((~srankbits&0x7fff)>>srankhiplayer)<=3 && NOT StraightPossible && PairOnBoard) ? 4 :
   ((!TwoPairOnBoard && HaveFlushDraw && `((~srankbits&0x7fff)>>srankhiplayer)==0 && nsuitedcommon==2 && NOT PairOnBoard) 
|| (!TwoPairOnBoard && rankloplayer>rankhicommon && NOT StraightPossible && NOT PairOnBoard && HaveFlushDraw && nsuitedcommon==2) 
||(!TwoPairOnBoard && hand$AA && FlushPossible && HaveFlushDraw && NOT PairOnBoard) 
|| (!TwoPairOnBoard && nstraight==4 && nstraight>nstraightcommon && !f$wheeldraw && ishipair && NOT FlushPossible && NOT PairOnBoard && (pokervalcommon < onepair)) 
||(HaveFlushDraw && nsuited>nsuitedcommon && ishipair && NOT PairOnBoard)) ? 3 :
   ((!TwoPairOnBoard && HaveFlushDraw && `((~srankbits&0x7fff)>>srankhiplayer)==0 && FlushPossible && NOT PairOnBoard) 
|| (!TwoPairOnBoard && HaveFlushDraw && `((~srankbits&0x7fff)>>srankhiplayer)==0 && FlushPossible && nrankedcommon<3) 
|| (!TwoPairOnBoard && nstraight==4 && nstraight>nstraightcommon && !f$wheeldraw && ismidpair && nrankedcommon<3 && NOT FlushPossible && (pokervalcommon < onepair)) 
|| (!TwoPairOnBoard && HaveFlushDraw && nsuited>nsuitedcommon && ismidpair && nrankedcommon<3 && (pokervalcommon < onepair)) 
|| (!TwoPairOnBoard && HaveFlushDraw && `((~srankbits&0x7fff)>>srankhiplayer)==1 && nrankedcommon<3) 
|| (!TwoPairOnBoard && HaveFlushDraw && `((~srankbits&0x7fff)>>srankhiplayer)==0 && nsuitedcommon==2 && nrankedcommon<3) 
|| (!TwoPairOnBoard && HaveFlushDraw && `((~srankbits&0x7fff)>>srankhiplayer)==0 && nsuitedcommon==2 && nrankedcommon<3) 
|| (!TwoPairOnBoard && HaveFlushDraw && `((~srankbits&0x7fff)>>srankhiplayer)==2 && nrankedcommon<3) 
|| (!TwoPairOnBoard && HaveFlushDraw && nsuitedcommon==2 && nrankedcommon<3) 
|| (isthreeofakind && NOT IsRiver && NOT PairOnBoard) 
|| (rankloplayer>rankhicommon && NOT IsRiver && f$safeboard && isonepair && !ispair) 
|| (rankloplayer>rankhicommon && NOT IsRiver && NOT FlushPossible && NOT StraightPossible && nstraightfillcommon>1 && istwopair && PairOnBoard) 
|| (nstraightfill==1 && NOT IsRiver && istwopair && PairOnBoard && NOT FlushPossible) 
|| (nstraightfill==1 && NOT IsRiver && rankloplayer>rankhicommon && f$safeboard) 
|| (nstraightfill==1 && NOT IsRiver && nsuited==3 && IsFlop && rankhiplayer>rankhicommon && f$safeboard) 
|| (!TwoPairOnBoard && NOT IsRiver && HaveFlushDraw && FlushPossible && rankloplayer>11 && nrankedcommon<3) ||
(!TwoPairOnBoard && NOT IsRiver && nsuited==3 && nsuitedcommon==1 && nstraight==3 && nstraightcommon<=2 && rankloplayer>rankhicommon && NOT PairOnBoard && IsFlop) ||
(!TwoPairOnBoard && IsFlop && nstraight==4 && nstraightcommon==3 && !f$wheeldraw && NOT FlushPossible && nrankedcommon<3 && rankhiplayer>rankhicommon) ||
(!TwoPairOnBoard && nstraight==4 && nstraightcommon<=2 && NOT FlushPossible && nrankedcommon<3 && !f$wheeldraw && nrankedcommon<3) ||
(!TwoPairOnBoard && NOT IsRiver && nstraight==4 && nstraightcommon==3 && !f$wheeldraw && rankloplayer>ranklocommon && rankhiplayer>rankhicommon && nrankedcommon<3)) ? 2 :
((!TwoPairOnBoard && (nstraight==2 && nstraightfillcommon==1 && NOT FlushPossible && NOT PairOnBoard)||(nstraight==3 && nstraightfillcommon==1 && NOT FlushPossible && NOT PairOnBoard)) ||
(nstraightfill==1 && NOT FlushPossible) ||
(istwopair && NOT PairOnBoard) ||
(isonepair && NOT FlushPossible && NOT StraightPossible && NOT PairOnBoard) ||
(!TwoPairOnBoard && FlushPossible && HaveFlushDraw && (srankloplayer>6||srankhiplayer>6) && NOT PairOnBoard) ||
(!TwoPairOnBoard && nstraight==4 && nstraightcommon==3 && NOT PairOnBoard) ||
(!TwoPairOnBoard && nstraight==3 && nstraightcommon==2 && StraightPossible && NOT PairOnBoard) ||
(f$wheeldraw && NOT PairOnBoard)) ? 1 :
0

##f$wheeldraw##
// !!! Does not consider all wheels
(rankbits>>9==0b111100)                                 // AKQJ
|| (rankbits & 0b0000000000011110)==0b0000000000011110  // 432A

##f$safeboard##
[ NOT PairOnBoard && nsuitedcommon<=2 && nstraightcommon<=2 ]

##f$actionpreflop_1##
[ ncallbets<=1 && nopponentscalling<=0 ]

##f$actionpreflop_2##
[ ncallbets<=1 && nopponentscalling==1 ]

##f$actionpreflop_3##
[ ncallbets<=1 && nopponentscalling==2 ]

##f$actionpreflop_4##
[ ncallbets<=1 && nopponentscalling>=3 ]

##f$actionpreflop_5##
[ !(didbetsize || didrais || didcall) ] ? {
    [ InSmallBlind ] ? call>sblind && call<6*bblind :
    [ InBigBlind ] ? call>0      && call<6*bblind :
    [ NOT InTheBlinds ] ? call>bblind && call<7*bblind : 0 } :
0

##f$actionpreflop_6##
[ !(didbetsize || didrais || didcall) ] ? call>=6*bblind : 0

##f$actionpreflop_7##
[ (didbetsize || didrais || didcall) && call<20*bblind ]

##f$actionpreflop_8##
[ (didbetsize || didrais || didcall) && call>=20*bblind ]

##f$flop_call##
[ f$Odds_and_Outs          ] ? 1 :
[ f$Initiative_Hero        ] ? f$flop_call_initiative   :
[ f$Initiative_Villian     ] ? f$flop_call_noinitiative :
[ f$Initiative_Nobody      ] ? f$flop_call_noaction     :
0

##f$turn_call##
[ f$Odds_and_Outs          ] ? 1 :
[ f$Initiative_Hero        ] ? f$turn_call_initiative   :
[ f$Initiative_Villian     ] ? f$turn_call_noinitiative :
[ f$Initiative_Nobody      ] ? f$turn_call_noaction     : 
[ f$Initiative_GotRaised   ] ? f$turn_call_wegotraised  :
0

##f$river_call##
[ f$Initiative_Hero       ] ? f$river_call_initiative   :
[ f$Initiative_Villian    ] ? f$river_call_noinitiative :
[ f$Initiative_Nobody     ] ? f$river_call_noaction     : 
[ f$Initiative_GotRaised  ] ? f$river_call_wegotraised  :
0

##f$flop_raise##
[ f$Initiative_Hero    ] ? f$flop_raise_initiative   :
[ f$Initiative_Villian ] ? f$flop_raise_noinitiative :
[ f$Initiative_Nobody  ] ? f$flop_raise_noaction     : 0

##f$turn_raise##
[ f$Initiative_Hero      ] ? f$turn_raise_initiative   :
[ f$Initiative_Villian   ] ? f$turn_raise_noinitiative :
[ f$Initiative_Nobody    ] ? f$turn_raise_noaction     : 
[ f$Initiative_GotRaised ] ? f$turn_raise_wegotraised  :
0

##f$river_raise##
[ f$Initiative_Hero      ] ? f$river_raise_initiative   :
[ f$Initiative_Villian   ] ? f$river_raise_noinitiative :
[ f$Initiative_Nobody    ] ? f$river_raise_noaction     : 
[ f$Initiative_GotRaised ] ? f$river_raise_wegotraised  :
0

##f$logicalpositionrais##
// Return values
//   1 = SB
//   2 = BB
//   6 = BU
//   5 = CO
//   4 = MP3
//   2 = MP2 (or more early on FR-games)
WHEN (dealpositionrais == 1) RETURN 1 FORCE
WHEN (dealpositionrais == 2) RETURN 2 FORCE
WHEN (dealpositionrais == (nplayersplaying - 0)) RETURN 6 FORCE
WHEN (dealpositionrais == (nplayersplaying - 1)) RETURN 5 FORCE
WHEN (dealpositionrais == (nplayersplaying - 2)) RETURN 4 FORCE
WHEN Others RETURN 3 FORCE

##f$Initiative_Hero##
IsPreflop && nbetsround_preflop>1 && !didcallround_preflop ? 1 :
IsFlop && nbetsround_preflop>1 && !didcallround_preflop ? 1 :
IsTurn && nbetsround_flop>0 && !didcallround_flop ? 1 :
IsRiver && nbetsround_turn>0 && !didcallround_turn ? 1 : 0

##f$Initiative_Nobody##
IsPreflop ? nbetsround_preflop<=1 :
IsFlop ? nbetsround_preflop<=1 :
IsTurn ? nbetsround_flop<=0 :
IsRiver ? nbetsround_turn<=0 : 0

##f$Initiative_Villian##
IsPreflop ? didcallround_preflop && nbetsround_preflop>1 :
IsFlop ? didcallround_preflop && nbetsround_preflop>1 :
IsTurn ? !didbetsizeround_flop && didcallround_flop && nbetsround_flop>0 :
IsRiver ? !didbetsizeround_flop && didcallround_turn && nbetsround_turn>0 : 0

##f$prwin##
[prwin+(prtie/2)]**(1+f$threat)

##f$flop_raise_initiative##
[ Position = First ] ? {
    [ f$actionpostflop_1 ] ? {
        [ nplayersplaying<=2 ] ? 1 :
//          [ f$fold2cbet_veel || f$fold2cbet_normal ] ? {
//            [ f$stackopponent< 30*bblind ] ? {
//                [ rankhicommon==13 || rankhicommon==14 ] ? f$prwin>0 :
//                [ f$prwin>0.65                         ] ? 1         : 0 } :
//            [ f$stackopponent>=30*bblind ] ? {
//                [ f$pt_flopaf<4  ] ? f$prwin>0.00 :
//                [ f$pt_flopaf>=4 ] ? f$prwin>0.00 && f$prwin<.92 : 0 } : 0 } :
//          [ f$fold2cbet_weinig ] ? {
//              [ f$pt_flopaf<4  ] ? {
//                  [ rankhicommon==13 || rankhicommon==14 ] ? f$prwin>0 :
//                  [ f$prwin>0.65                         ] ? 1         : 0 } :
//              [ f$pt_flopaf>=4 ] ? f$prwin>0.65 && f$prwin<.92 : 0 } : 0 } :
        [ nplayersplaying==3 ] ? 1            :
        [ nplayersplaying>=4 ] ? f$prwin>0.45 : 0 } :
    [ f$actionpostflop_2 ] ? {
        [ nplayersplaying<=2 ] ? f$prwin>0.45 :
        [ nplayersplaying==3 ] ? f$prwin>0.68 :
        [ nplayersplaying>=4 ] ? f$prwin>0.70 : 0 } :
    [ f$actionpostflop_3 ] ? f$prwin>0.75 :
    [ f$actionpostflop_4 ] ? f$prwin>0.76 :
    [ f$actionpostflop_5 ] ? f$prwin>0.77 :
    [ f$actionpostflop_6 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.78 :
        [ f$ptype_semilag ] ? f$prwin2>.78 :
        [ f$ptype_lag     ] ? {
            [ nplayersplaying==2 ] ? f$prwin2>.72 : 
            [ nplayersplaying>=3 ] ? f$prwin2>.78 : 0 } : 0 } :
    [ f$actionpostflop_7 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.78 :
        [ f$ptype_semilag ] ? f$prwin2>.78 :
        [ f$ptype_lag     ] ? {
            [ nplayersplaying==2 ] ? f$prwin2>.76 : 
            [ nplayersplaying>=3 ] ? f$prwin2>.78 : 0 } : 0 } :
    [ f$actionpostflop_8 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.78 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.77 : 0 } :
    [ f$actionpostflop_9 ] ? f$prwin>.85 :
    [ f$actionpostflop_10] ? f$prwin>.85 : 0 } :
// ---------------------------------------------
[ Position = Middle ] ? {
    [ f$actionpostflop_1 ] ? {
        [ nplayersplaying==2 ] ? 1 :
        [ nplayersplaying==3 ] ? {
            [ f$draws>1 && HaveFlushDraw ] ? 1 :
            [ f$prwin>0.65            ] ? 1 : 0 } :
        [ nplayersplaying>=4 ] ? f$prwin>0.58 : 0 } :
    [ f$actionpostflop_2 ] ? {
        [ nplayersplaying==3 ] ? f$prwin>0.65 :
        [ nplayersplaying>=4 ] ? f$prwin>0.65 : 0 } :
    [ f$actionpostflop_3 ] ? {
        [ nplayersplaying==2 ] ? f$prwin>.75 :
        [ nplayersplaying>=3 ] ? f$prwin>.78 : 0 } :
    [ f$actionpostflop_4 ] ? f$prwin>.78 :
    [ f$actionpostflop_5 ] ? f$prwin>.78 :
    [ f$actionpostflop_6 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.78 :
        [ f$ptype_semilag ] ? f$prwin2>.78 :
        [ f$ptype_lag     ] ? f$prwin2>.78 : 0 } :
    [ f$actionpostflop_7 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.78 :
        [ f$ptype_semilag ] ? f$prwin2>.78 :
        [ f$ptype_lag     ] ? f$prwin2>.78 : 0 } :
    [ f$actionpostflop_8 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.80 :
        [ f$ptype_semilag ] ? f$prwin2>.80 :
        [ f$ptype_lag     ] ? f$prwin2>.80 : 0 } :
    [ f$actionpostflop_9 ] ? f$prwin>.85 :
    [ f$actionpostflop_10] ? f$prwin>.85 : 0 } :
// ---------------------------------------------------
[ Position = Last ] ? {
    [ f$actionpostflop_1 ] ? {
        [ nplayersplaying<=2 ] ? {
            [ f$prwin>0.00 && f$prwin<0.38 ] ? 1 :
            [ f$prwin>0.40 && f$prwin<0.45 ] ? 1 :
            [ f$prwin>0.50 && f$prwin<0.55 ] ? 1 :
            [ f$prwin>0.60 && f$prwin<0.82 ] ? 1 :
            [ f$prwin>0.86                 ] ? 1 : 0 } :
        [ nplayersplaying==3 ] ? 1            :
        [ nplayersplaying>=4 ] ? f$prwin>0.65 : 0 } :
    [ f$actionpostflop_2 ] ? {
        [ nplayersplaying<=2 ] ? f$prwin>0.30 :
        [ nplayersplaying==3 ] ? f$prwin>0.65 :
        [ nplayersplaying>=4 ] ? f$prwin>0.70 : 0 } :
    [ f$actionpostflop_3 ] ? {
        [ nplayersplaying==2 ] ? {
            [ f$pt_wtsd<=0.00 ] ? f$prwin>.70 :
            [ f$pt_wtsd>0.00 && f$pt_wtsd<=0.30 ] ? f$prwin>.65 && f$prwin<.95 : // bluffraise his lead
            [ f$pt_wtsd>0.30 ] ? f$prwin>.70 : 0 } :
        [ nplayersplaying>=3 ] ? f$prwin>.78 : 0 } :
    [ f$actionpostflop_4 ] ? f$prwin>.80 :
    [ f$actionpostflop_5 ] ? f$prwin>.80 :
    [ f$actionpostflop_6 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.83 :
        [ f$ptype_tag     ] ? f$prwin2>.79 :
        [ f$ptype_semilag ] ? f$prwin2>.78 :
        [ f$ptype_lag     ] ? f$prwin2>.77 : 0 } :
    [ f$actionpostflop_7 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.83 :
        [ f$ptype_tag     ] ? f$prwin2>.79 :
        [ f$ptype_semilag ] ? f$prwin2>.78 :
        [ f$ptype_lag     ] ? f$prwin2>.77 : 0 } :
    [ f$actionpostflop_8 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.83 :
        [ f$ptype_tag     ] ? f$prwin2>.80 :
        [ f$ptype_semilag ] ? f$prwin2>.78:
        [ f$ptype_lag     ] ? f$prwin2>.78 : 0 } :
    [ f$actionpostflop_9 ] ? f$prwin>.85 :
    [ f$actionpostflop_10] ? f$prwin>.85 : 0 } :
0

##f$flop_raise_noinitiative##
[ Position = First ] ? {
    [ f$actionpostflop_1 && nplayersplaying==2 ] ? { // donk flop
        [ f$draws>=2                   ] ? 1 :
        [ f$prwin>0.40 && f$prwin<0.60 ] ? 1 : 0 } :
    [ f$actionpostflop_2 ] ? f$prwin>.50 : // raise minbet
    [ f$actionpostflop_3 ] ? {
        [ nplayersplaying==2 ] ? {
            [ nplayersround_flop==2 ] ? f$prwin>0.70 :
            [ nplayersround_flop>=3 ] ? f$prwin>0.75 : 0 } :
        [ nplayersplaying>=3 ] ? {
            [ nplayersround_flop==3 ] ? f$prwin>0.75 :
            [ nplayersround_flop>=4 ] ? f$prwin>0.80 : 0 } : 0 } :
    [ f$actionpostflop_4 ] ? {
        [ f$draws>1 && nplayersplaying==2 ] ? 1 :
        [ f$prwin>0.75 && f$prwin<0.95    ] ? 1 : 0 } :
    [ f$actionpostflop_5 ] ? f$prwin>.80 :
    [ f$actionpostflop_6 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.85 :
        [ f$ptype_tag     ] ? f$prwin2>.85 :
        [ f$ptype_semilag ] ? f$prwin2>.82 :
        [ f$ptype_lag     ] ? {
            [ nplayersplaying==2 ] ? f$prwin2>.80 : 
            [ nplayersplaying>=3 ] ? f$prwin2>.77 : 0 } : 0 } :
    [ f$actionpostflop_7 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.85 :
        [ f$ptype_tag     ] ? f$prwin2>.82 :
        [ f$ptype_semilag ] ? f$prwin2>.80 :
        [ f$ptype_lag     ] ? {
            [ nplayersplaying==2 ] ? f$prwin2>.78 : 
            [ nplayersplaying>=3 ] ? f$prwin2>.77 : 0 } : 0 } :
    [ f$actionpostflop_8 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.85 :
        [ f$ptype_tag     ] ? f$prwin2>.82 :
        [ f$ptype_semilag ] ? f$prwin2>.80 :
        [ f$ptype_lag     ] ? {
            [ nplayersplaying==2 ] ? f$prwin2>.78 : 
            [ nplayersplaying>=3 ] ? f$prwin2>.77 : 0 } : 0 } :
    [ f$actionpostflop_9 ] ? f$prwin>.80 :
    [ f$actionpostflop_10] ? f$prwin>.80 : 0 } :
[ Position = Middle ] ? {
    [ f$actionpostflop_1 ] ? f$prwin>.72 :
    [ f$actionpostflop_2 ] ? f$prwin>.76 :
    [ f$actionpostflop_3 ] ? f$prwin>.78 :
    [ f$actionpostflop_4 ] ? f$prwin>.80 :
    [ f$actionpostflop_5 ] ? f$prwin>.80 :
    [ f$actionpostflop_6 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.85 :
        [ f$ptype_tag     ] ? f$prwin2>.82 :
        [ f$ptype_semilag ] ? f$prwin2>.80 :
        [ f$ptype_lag     ] ? f$prwin2>.78 : 0 } :
    [ f$actionpostflop_7 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.85 :
        [ f$ptype_tag     ] ? f$prwin2>.82 :
        [ f$ptype_semilag ] ? f$prwin2>.80 :
        [ f$ptype_lag     ] ? f$prwin2>.78 : 0 } :
    [ f$actionpostflop_8 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.85 :
        [ f$ptype_tag     ] ? f$prwin2>.82 :
        [ f$ptype_semilag ] ? f$prwin2>.80 :
        [ f$ptype_lag     ] ? f$prwin2>.78 : 0 } :
    [ f$actionpostflop_9 ] ? f$prwin>.80 :
    [ f$actionpostflop_10] ? f$prwin>.80 : 0 } :
[ Position = Last ] ? {
    [ f$actionpostflop_1 ] ? {
       [ nplayersplaying==2 ] ? {
           [ f$draws>1   ] ? 1 :
           [ f$prwin>.50 ] ? 1 : 0 } :
       [ nplayersplaying>=3 ] ? f$prwin>.60 : 0 } :
    [ f$actionpostflop_2 ] ? f$prwin>.67 :
    [ f$actionpostflop_3 ] ? {
        [ f$draws>1                    ] ? 1 :
        [ f$prwin>0.72 && f$prwin<0.90 ] ? 1 : 0 } :
    [ f$actionpostflop_4 ] ? {
        [ f$draws>3                    ] ? 1 :
        [ f$prwin>0.75 && f$prwin<0.90 ] ? 1 : 0 } :
    [ f$actionpostflop_5 ] ? f$prwin>.80 :
    [ f$actionpostflop_6 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.85 :
        [ f$ptype_tag     ] ? f$prwin2>.85 :
        [ f$ptype_semilag ] ? f$prwin2>.82 :
        [ f$ptype_lag     ] ? f$prwin2>.80 : 0 } :
    [ f$actionpostflop_7 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.85 :
        [ f$ptype_tag     ] ? f$prwin2>.85 :
        [ f$ptype_semilag ] ? f$prwin2>.82 :
        [ f$ptype_lag     ] ? f$prwin2>.80 : 0 } :
    [ f$actionpostflop_8 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.85 :
        [ f$ptype_tag     ] ? f$prwin2>.85 :
        [ f$ptype_semilag ] ? f$prwin2>.83 :
        [ f$ptype_lag     ] ? f$prwin2>.82 : 0 } :
    [ f$actionpostflop_9 ] ? f$prwin>.85 :
    [ f$actionpostflop_10] ? f$prwin>.85 : 0 } :
0

##f$flop_raise_noaction##
[ Position = First ] ? {
    [ f$actionpostflop_1 ] ? f$prwin>.55 :
    [ f$actionpostflop_2 ] ? f$prwin>.60 :
    [ f$actionpostflop_3 ] ? f$prwin>.65 :
    [ f$actionpostflop_4 ] ? f$prwin>.80 :
    [ f$actionpostflop_5 ] ? f$prwin>.92 :
    [ f$actionpostflop_6 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.85 :
        [ f$ptype_tag     ] ? f$prwin2>.85 :
        [ f$ptype_semilag ] ? f$prwin2>.82 :
        [ f$ptype_lag     ] ? f$prwin2>.72 : 0 } :
    [ f$actionpostflop_7 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.85 :
        [ f$ptype_tag     ] ? f$prwin2>.85 :
        [ f$ptype_semilag ] ? f$prwin2>.84 :
        [ f$ptype_lag     ] ? f$prwin2>.76 : 0 } :
    [ f$actionpostflop_8 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.85 :
        [ f$ptype_tag     ] ? f$prwin2>.85 :
        [ f$ptype_semilag ] ? f$prwin2>.84 :
        [ f$ptype_lag     ] ? f$prwin2>.82 : 0 } :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
[ Position = Middle ] ? {
    [ f$actionpostflop_1 ] ? f$prwin>.55 :
    [ f$actionpostflop_2 ] ? f$prwin>.60 :
    [ f$actionpostflop_3 ] ? f$prwin>.65 :
    [ f$actionpostflop_4 ] ? f$prwin>.80 :
    [ f$actionpostflop_5 ] ? f$prwin>.92 :
    [ f$actionpostflop_6 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.85 :
        [ f$ptype_tag     ] ? f$prwin2>.82 :
        [ f$ptype_semilag ] ? f$prwin2>.80 :
        [ f$ptype_lag     ] ? {
            [ nplayersplaying==2 ] ? f$prwin2>.72 : 
            [ nplayersplaying>=3 ] ? f$prwin2>.80 : 0 } : 0 } :
    [ f$actionpostflop_7 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.85 :
        [ f$ptype_tag     ] ? f$prwin2>.84 :
        [ f$ptype_semilag ] ? f$prwin2>.82 :
        [ f$ptype_lag     ] ? {
            [ nplayersplaying==2 ] ? f$prwin2>.76 : 
            [ nplayersplaying>=3 ] ? f$prwin2>.80 : 0 } : 0 } :
    [ f$actionpostflop_8 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.85 :
        [ f$ptype_tag     ] ? f$prwin2>.85 :
        [ f$ptype_semilag ] ? f$prwin2>.84 :
        [ f$ptype_lag     ] ? f$prwin2>.82 : 0 } :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
[ Position = Last ] ? {
    [ f$actionpostflop_1 ] ? f$prwin>.55 :
    [ f$actionpostflop_2 ] ? f$prwin>.60 :
    [ f$actionpostflop_3 ] ? f$prwin>.65 :
    [ f$actionpostflop_4 ] ? f$prwin>.80 :
    [ f$actionpostflop_5 ] ? f$prwin>.92 :
    [ f$actionpostflop_6 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.85 :
        [ f$ptype_tag     ] ? f$prwin2>.85 :
        [ f$ptype_semilag ] ? f$prwin2>.82 :
        [ f$ptype_lag     ] ? f$prwin2>.80 : 0 } :

    [ f$actionpostflop_7 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.85 :
        [ f$ptype_tag     ] ? f$prwin2>.85 :
        [ f$ptype_semilag ] ? f$prwin2>.84 :
        [ f$ptype_lag     ] ? f$prwin2>.82 : 0 } :
    [ f$actionpostflop_8 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.85 :
        [ f$ptype_tag     ] ? f$prwin2>.85 :
        [ f$ptype_semilag ] ? f$prwin2>.84 :
        [ f$ptype_lag     ] ? f$prwin2>.82 : 0 } :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :

0

##f$BestBetsize##
WHEN IsPreflop RETURN f$BetsizePreflop FORCE
WHEN HandIsHeadsup
   WHEN IsFlop  RETURN f$BetsizeFlopHeadsup  FORCE
   WHEN IsTurn  RETURN f$BetsizeTurnHeadsup  FORCE
   WHEN IsRiver RETURN f$BetsizeRiverHeadsup FORCE
WHEN Others
   WHEN IsFlop  RETURN f$BetsizeFlopMultiway  FORCE
   WHEN IsTurn  RETURN f$BetsizeTurnMultiway  FORCE
   WHEN IsRiver RETURN f$BetsizeRiverMultiway FORCE   

##f$BetsizePreflop##
WHEN (Raises > 0) RaiseBy (4 * BetSize) FORCE
WHEN (Calls > 0) RaiseTo (3.5 + (0.5 * nopponentscalling)) FORCE
// Openraising with flexible betsize, depending on position / range
// http://www.maxinmontreal.com/forums/viewtopic.php?f=297&t=21070&start=90#p148218
WHEN InLatePosition AND istournament AND (BigBlindSize > 100) RaiseTo 2.5 FORCE
WHEN InLatePosition RaiseTo 3 FORCE
WHEN InMiddlePosition RaiseTo 3.5 FORCE
WHEN InEarlyPosition RaiseTo 4 FORCE
WHEN InTheBlinds RaiseTo 3 FORCE
	
##f$BetsizeFlopHeadsup##
WHEN (AmountToCall <= 1)
   WHEN (nbetsround_preflop <= 6)  RaiseBy 75% FORCE
   WHEN Others  RaiseBy 55% FORCE
WHEN NOT didbetsize
   WHEN (AmountToCall <= 33% PotSize) RaisePot FORCE
   WHEN Others RaiseBy (4 * BetSize) FORCE
WHEN Others
   WHEN (nbetsround_preflop <= 1) RaiseBy (4 * BetSize) FORCE
   WHEN f$ptype_lag RaiseBy (2 * BetSize) FORCE
   // Formerly RaiseMax.
   WHEN Others RaisePot FORCE
           
##f$BetsizeTurnHeadsup##
WHEN (AmountToCall <= 0)
   WHEN (PotSize <= 35) RaiseBy 70% FORCE
   WHEN Others RaiseBy RaisePot FORCE
WHEN (AmountToCall <= 2)
   WHEN (PotSize <= 25) RaisePot FORCE
   WHEN Others RaiseBy 65% FORCE
WHEN Others
   // Formerly RaiseMax.
   WHEN f$betline RaisePot FORCE
   WHEN (AmountToCall <= 33% PotSize) RaisePot FORCE
   WHEN Others RaiseBy (4 * BetSize) FORCE

##f$BetsizeRiverHeadsup##
WHEN (AmountToCall <= 0)
   WHEN (PotSize <= 10) RaiseBy 80% FORCE
   WHEN (PotSize <= 80) RaiseBy 60% FORCE
   // Huge pot, don't blow money away.
   // Make betsize dependent on prwin.
   // Block-bet with not so strong hands
   WHEN (f$prwin<=0.8) RaiseBy 25% FORCE
   WHEN Others RaiseBy 60% FORCE   
WHEN (AmountToCall <= 2) RaisePot FORCE
WHEN Others
   WHEN (AmountToCall <= 33% PotSize) RaisePot FORCE
   WHEN Others RaiseBy (3 * BetSize) FORCE

##f$BetsizeFlopMultiway##
// Gecko had here 60% / 62%,
// which is pointless due to rounding
WHEN (AmountToCall <= 1) RaiseBy 60% FORCE
WHEN [ !didbetsize ] 
   WHEN (AmountToCall <= 33% PotSize) RaiseBy 80% FORCE
   WHEN Others RaiseBy (4 * BetSize) FORCE
WHEN Others
   WHEN (nbetsround_preflop<=1) RaiseBy (4 * BetSize) FORCE
   // Preflop raised, flop reraised.
   // Lots of action, large pot.
   // Formerly RaiseMax.
   WHEN Others RaisePot FORCE

##f$BetsizeTurnMultiway##
WHEN (AmountToCall <= 1)
   WHEN (PotSize <= 10) RaiseBy 70% FORCE
   WHEN Others RaiseBy 60% FORCE
WHEN Others
   WHEN (AmountToCall <= 33% PotSize) RaisePot FORCE
   WHEN Others RaiseBy (4 * BetSize) FORCE

##f$BetsizeRiverMultiway##
WHEN AmountToCall <= 1
   WHEN (PotSize <= 10) RaisePot FORCE
   WHEN Others RaiseBy 60% FORCE
WHEN Others
   WHEN (AmountToCall <= 33% PotSize) RaisePot FORCE
   WHEN Others RaiseBy (4 * BetSize) FORCE

##f$turn_raise_initiative##
[ Position = First ] ? {
    [ f$actionpostflop_1 ] ? {
        [ nplayersplaying==2 && nplayersround_flop==2 ] ? {
            [ didcallround_preflop && nbetsround_preflop>1 && nbetsround_preflop<=5 ] ? f$prwin>0 : // donkbet and 2nd barrel turn
            [ f$AggressionFactor_Turn2<=3.00 ] ? {
                [ f$draws>1   ] ? 1 :
                [ f$prwin>.70 && !(ismidpair && rankhicommon==14 && NOT PairOnBoard) ] ? 1 : 0 } :
            [ f$AggressionFactor_Turn2>3.00 && !(ismidpair && rankhicommon==14 && NOT PairOnBoard) ] ? f$prwin>.70 && f$prwin<.80 : 0 } : // only barrel value oop
        [ nplayersplaying>=2 && nplayersround_flop>=3 && !(ismidpair && rankhicommon==14 && NOT PairOnBoard) ] ? f$prwin>.74 : 0 } :
    [ f$actionpostflop_2 ] ? f$prwin>.80 :
    [ f$actionpostflop_3 ] ? f$prwin>.80 :
    [ f$actionpostflop_4 ] ? f$prwin>.80 : // check push allin
    [ f$actionpostflop_5 ] ? f$prwin>.90 :
    [ f$actionpostflop_6 ] ? f$prwin>.85 :
    [ f$actionpostflop_7 ] ? f$prwin>.86 :
    [ f$actionpostflop_8 ] ? f$prwin>.97 :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
[ Position = Middle ] ? {
    [ f$actionpostflop_1 ] ? f$prwin>.72 :
    [ f$actionpostflop_2 ] ? f$prwin>.80 :
    [ f$actionpostflop_3 ] ? f$prwin>.85 :
    [ f$actionpostflop_4 ] ? f$prwin>.90 :
    [ f$actionpostflop_5 ] ? f$prwin>.95 :
    [ f$actionpostflop_6 ] ? f$prwin>.96 :
    [ f$actionpostflop_7 ] ? f$prwin>.96 :
    [ f$actionpostflop_8 ] ? f$prwin>.97 :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
[ Position = Last ] ? {
    [ f$actionpostflop_1 ] ? {
        [ nplayersplaying==2 && nplayersround_flop==2 ] ? {
             [ f$prwin<0.72 && !(ismidpair && rankhicommon==14 && NOT PairOnBoard) && ranklocommon<10 && nbetsround_preflop<7 && nbetsround_flop<15 && NOT PairOnBoard ] ? 1 :
             [ f$prwin>=0.78 ] ? 1 : 0 } :
        [ nplayersplaying>=2 && nplayersround_flop>=3 && ranklocommon<10 && !(ismidpair && rankhicommon==14 && NOT PairOnBoard) ] ? f$prwin>0.65 : 0 } :
    [ f$actionpostflop_2 ] ? f$prwin>.80 :
    [ f$actionpostflop_3 ] ? f$prwin>.80 :
    [ f$actionpostflop_4 ] ? f$prwin>.85 :
    [ f$actionpostflop_5 ] ? f$prwin>.95 :
    [ f$actionpostflop_6 ] ? f$prwin>.96 :
    [ f$actionpostflop_7 ] ? f$prwin>.96 :
    [ f$actionpostflop_8 ] ? f$prwin>.97 :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
0

##f$turn_raise_noinitiative##
[ Position = First ] ? {
    [ nplayersplaying==2 ] ? {
        [ f$actionpostflop_1 ] ? f$prwin>.88 : // check raise
        [ f$actionpostflop_2 ] ? f$prwin>.75 :
        [ f$actionpostflop_3 ] ? f$prwin>.78 :
        [ f$actionpostflop_4 ] ? f$prwin>.80 :
        [ f$actionpostflop_5 ] ? f$prwin>.95 :
        [ f$actionpostflop_6 ] ? f$prwin>.96 :
        [ f$actionpostflop_7 ] ? f$prwin>.97 :
        [ f$actionpostflop_8 ] ? f$prwin>.97 :
        [ f$actionpostflop_9 ] ? f$nuts      :
        [ f$actionpostflop_10] ? f$nuts      : 0 } :
    [ nplayersplaying>=3 ] ? {
        [ f$actionpostflop_1 ] ? f$prwin>.75 && f$prwin<.96 :
        [ f$actionpostflop_2 ] ? f$prwin>.96 :
        [ f$actionpostflop_3 ] ? f$prwin>.96 :
        [ f$actionpostflop_4 ] ? f$prwin>.96 :
        [ f$actionpostflop_5 ] ? f$prwin>.96 :
        [ f$actionpostflop_6 ] ? f$prwin>.96 :
        [ f$actionpostflop_7 ] ? f$prwin>.97 :
        [ f$actionpostflop_8 ] ? f$prwin>.97 :
        [ f$actionpostflop_9 ] ? f$nuts      :
        [ f$actionpostflop_10] ? f$nuts      : 0 } : 0 } :
[ Position = Middle ] ? {
    [ f$actionpostflop_1 ] ? f$prwin>.80 :
    [ f$actionpostflop_2 ] ? f$prwin>.80 :
    [ f$actionpostflop_3 ] ? f$prwin>.86 :
    [ f$actionpostflop_4 ] ? f$prwin>.90 :
    [ f$actionpostflop_5 ] ? f$prwin>.96 :
    [ f$actionpostflop_6 ] ? f$prwin>.96 :
    [ f$actionpostflop_7 ] ? f$prwin>.97 :
    [ f$actionpostflop_8 ] ? f$prwin>.97 :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
[ Position = Last ] ? {
    [ f$actionpostflop_1 ] ? f$prwin>.80 :
    [ f$actionpostflop_2 ] ? f$prwin>.80 :
    [ f$actionpostflop_3 ] ? f$prwin>.80 :
    [ f$actionpostflop_4 ] ? f$prwin>.90 :
    [ f$actionpostflop_5 ] ? f$prwin>.96 :
    [ f$actionpostflop_6 ] ? f$prwin>.98 :
    [ f$actionpostflop_7 ] ? f$prwin>.98 :
    [ f$actionpostflop_8 ] ? f$prwin>.98 :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
0

##f$turn_raise_noaction##
[ Position = First ] ? {
    [ f$actionpostflop_1 ] ? {
        [ nplayersplaying==2 ] ? {
            [ f$draws>1   ] ? 1 :
            [ f$prwin>.64 ] ? 1 : 0 } :
        [ nplayersplaying>=3 ] ? f$prwin>.64 : 0 } :
    [ f$actionpostflop_2 ] ? f$prwin>.98 :
    [ f$actionpostflop_3 ] ? f$prwin>.98 :
    [ f$actionpostflop_4 ] ? f$prwin>.98 :
    [ f$actionpostflop_5 ] ? f$prwin>.98 :
    [ f$actionpostflop_6 ] ? f$prwin>.85 :
    [ f$actionpostflop_7 ] ? f$prwin>.85 : 
    [ f$actionpostflop_8 ] ? f$prwin>.95 :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
[ Position = Middle ] ? {
    [ f$actionpostflop_1 ] ? {
        [ f$draws>1   ] ? 1 :
        [ f$prwin>.62 ] ? 1 : 0 } :
    [ f$actionpostflop_2 ] ? f$prwin>.80 :
    [ f$actionpostflop_3 ] ? f$prwin>.80 :
    [ f$actionpostflop_4 ] ? f$prwin>.82 :
    [ f$actionpostflop_5 ] ? f$prwin>.86 :
    [ f$actionpostflop_6 ] ? f$prwin>.95 :
    [ f$actionpostflop_7 ] ? f$prwin>.96 :
    [ f$actionpostflop_8 ] ? f$prwin>.97 :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
[ Position = Last ] ? {
    [ f$actionpostflop_1 ] ? {
         [ nplayersround_flop==2 ] ? f$prwin>0 :
         [ nplayersround_flop>=3 ] ? {
             [ f$draws>1   ] ? 1 :
             [ f$prwin>.60 ] ? 1 : 0 } : 0 } :
    [ f$actionpostflop_2 ] ? f$prwin>.74 :
    [ f$actionpostflop_3 ] ? f$prwin>.78 :
    [ f$actionpostflop_4 ] ? f$prwin>.80 :
    [ f$actionpostflop_5 ] ? f$prwin>.86 :
    [ f$actionpostflop_6 ] ? f$prwin>.95 :
    [ f$actionpostflop_7 ] ? f$prwin>.96 :
    [ f$actionpostflop_8 ] ? f$prwin>.97 :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
0

##f$river_raise_initiative##
[ Position = First ] ? {
    [ f$actionpostflop_1 ] ? {
      [ nplayersplaying==2 ] ? {
        [ f$draws>1 && HaveFlushDraw && f$pt_vpip>0.50 && f$pt_wtsd>0.30 && random>.50 ] ? 1 :
        [ f$pt_riveraf<2  ] ? f$prwin>.78 :
        [ f$pt_riveraf>=2 ] ? f$prwin>.90 : 0 } :
      [ nplayersplaying>=3 ] ? f$prwin>.80 : 0 } :
    [ f$actionpostflop_2 ] ? f$prwin>.80 :
    [ f$actionpostflop_3 ] ? f$prwin>.98 :
    [ f$actionpostflop_4 ] ? f$prwin>.98 :
    [ f$actionpostflop_5 ] ? f$prwin>.98 :
    [ f$actionpostflop_6 ] ? f$prwin>.95 :
    [ f$actionpostflop_7 ] ? f$prwin>.96 :
    [ f$actionpostflop_8 ] ? f$prwin>.97 :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
[ Position = Middle ] ? {
    [ f$actionpostflop_1 ] ? f$prwin>.80 :
    [ f$actionpostflop_2 ] ? f$prwin>.86 :
    [ f$actionpostflop_3 ] ? f$prwin>.90 :
    [ f$actionpostflop_4 ] ? f$prwin>.96 :
    [ f$actionpostflop_5 ] ? f$prwin>.98 :
    [ f$actionpostflop_6 ] ? f$prwin>.95 :
    [ f$actionpostflop_7 ] ? f$prwin>.96 :
    [ f$actionpostflop_8 ] ? f$prwin>.97 :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
[ Position = Last ] ? {
    [ f$actionpostflop_1 ] ? {
        [ nplayersplaying==2 && nplayersround_flop==2 && handsplayed>15 && !f$safeboard1 && !didcallround_preflop && nbetsround_preflop>1 && nbetsround_preflop<=6 && didbetsizeround_flop && !didcallround_flop && nbetsround_flop<11 ] ? f$prwin>0.00 :
        [ nplayersplaying==2 && nbetsround_flop==0 ] ? f$prwin>0.70 :
        [ nplayersplaying>=3 && nbetsround_flop==0 ] ? f$prwin>0.75 :
        [ f$prwin>.80 ] ? 1 : 0 } :
    [ f$actionpostflop_2 ] ? f$prwin>.86 :
    [ f$actionpostflop_3 ] ? f$prwin>.90 :
    [ f$actionpostflop_4 ] ? f$prwin>.96 :
    [ f$actionpostflop_5 ] ? f$prwin>.98 :
    [ f$actionpostflop_6 ] ? f$prwin>.98 :
    [ f$actionpostflop_7 ] ? f$prwin>.98 :
    [ f$actionpostflop_8 ] ? f$prwin>.98 :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
0

##f$river_raise_noinitiative##
[ Position = First ] ? {
    [ f$actionpostflop_1 ] ? f$prwin>.80 :
    [ f$actionpostflop_2 ] ? f$prwin>.90 :
    [ f$actionpostflop_3 ] ? f$prwin>.90 :
    [ f$actionpostflop_4 ] ? f$prwin>.90 :
    [ f$actionpostflop_5 ] ? f$prwin>.90 :
    [ f$actionpostflop_6 ] ? f$prwin>.96 :
    [ f$actionpostflop_7 ] ? f$prwin>.97 :
    [ f$actionpostflop_8 ] ? f$prwin>.97 :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
[ Position = Middle ] ? {
    [ f$actionpostflop_1 ] ? f$prwin>.80 :
    [ f$actionpostflop_2 ] ? f$prwin>.80 :
    [ f$actionpostflop_3 ] ? f$prwin>.86 :
    [ f$actionpostflop_4 ] ? f$prwin>.90 :
    [ f$actionpostflop_5 ] ? f$prwin>.96 :
    [ f$actionpostflop_6 ] ? f$prwin>.96 :
    [ f$actionpostflop_7 ] ? f$prwin>.97 :
    [ f$actionpostflop_8 ] ? f$prwin>.97 :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
[ Position = Last ] ? {
    [ f$actionpostflop_1 ] ? f$prwin>.80 :
    [ f$actionpostflop_2 ] ? f$prwin>.80 :
    [ f$actionpostflop_3 ] ? f$prwin>.80 :
    [ f$actionpostflop_4 ] ? f$prwin>.90 :
    [ f$actionpostflop_5 ] ? f$prwin>.96 :
    [ f$actionpostflop_6 ] ? f$prwin>.98 :
    [ f$actionpostflop_7 ] ? f$prwin>.98 :
    [ f$actionpostflop_8 ] ? f$prwin>.98 :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
0

##f$river_raise_noaction##
// Toevoegen NBETSround_preflop
[ Position = First ] ? {
    [ f$actionpostflop_1 ] ? {
         [ nplayersround_flop==2 ] ? {
             [ nbetsround_preflop<6 && nbetsround_flop<15 ] ? f$prwin>0 :
             [ f$prwin>.65                     ] ? 1         : 0 } :
         [ nplayersround_flop>=3 ] ? f$prwin>.65 : 0 } :
    [ f$actionpostflop_2 ] ? f$prwin>.98 :
    [ f$actionpostflop_3 ] ? f$prwin>.98 :
    [ f$actionpostflop_4 ] ? f$prwin>.98 :
    [ f$actionpostflop_5 ] ? f$prwin>.98 :
    [ f$actionpostflop_6 ] ? f$prwin>.95 :
    [ f$actionpostflop_7 ] ? f$prwin>.96 : 
    [ f$actionpostflop_8 ] ? f$prwin>.97 :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
[ Position = Middle ] ? {
    [ f$actionpostflop_1 ] ? f$prwin>.64 :
    [ f$actionpostflop_2 ] ? f$prwin>.80 :
    [ f$actionpostflop_3 ] ? f$prwin>.80 :
    [ f$actionpostflop_4 ] ? f$prwin>.82 :
    [ f$actionpostflop_5 ] ? f$prwin>.86 :
    [ f$actionpostflop_6 ] ? f$prwin>.95 :
    [ f$actionpostflop_7 ] ? f$prwin>.96 :
    [ f$actionpostflop_8 ] ? f$prwin>.97 :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
[ Position = Last ] ? {
    [ f$actionpostflop_1 ] ? {
         [ nplayersround_flop==2 ] ? f$prwin>.50 :
         [ nplayersround_flop>=3 ] ? f$prwin>.55 : 0 } :
    [ f$actionpostflop_2 ] ? f$prwin>.74 :
    [ f$actionpostflop_3 ] ? f$prwin>.78 :
    [ f$actionpostflop_4 ] ? f$prwin>.80 :
    [ f$actionpostflop_5 ] ? f$prwin>.86 :
    [ f$actionpostflop_6 ] ? f$prwin>.95 :
    [ f$actionpostflop_7 ] ? f$prwin>.96 :
    [ f$actionpostflop_8 ] ? f$prwin>.97 :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
0

##f$Odds_and_Outs##
IsFlop ? (f$OutOdds*2.0)>f$PotOdds :
IsTurn ? (f$OutOdds*1.2)>f$PotOdds : 0

##f$nOuts##
[0+

(IsFlop && nsuitedcommon==2 && HaveFlushDraw && NOT PairOnBoard                                    ? 9 : 0) +
(IsFlop && nsuitedcommon==2 && HaveFlushDraw && PairOnBoard                                    ? 8 : 0) +
(IsTurn && nsuitedcommon==2 && HaveFlushDraw && NOT PairOnBoard                                    ? 9 : 0) +
(IsTurn && nsuitedcommon==2 && HaveFlushDraw && PairOnBoard                                    ? 9 : 0) +
(HaveFlushDraw && `((~srankbits&0x7fff)>>srankhiplayer)==2 && FlushPossible && NOT PairOnBoard ? 7 : 0) + 
(HaveFlushDraw && `((~srankbits&0x7fff)>>srankhiplayer)==2 && FlushPossible && PairOnBoard ? 5 : 0) + 
(HaveFlushDraw && `((~srankbits&0x7fff)>>srankhiplayer)==1 && FlushPossible && NOT PairOnBoard ? 8 : 0) + 
(HaveFlushDraw && `((~srankbits&0x7fff)>>srankhiplayer)==1 && FlushPossible && PairOnBoard ? 6 : 0) + 
(HaveFlushDraw && `((~srankbits&0x7fff)>>srankhiplayer)==0 && FlushPossible && NOT PairOnBoard ? 9 : 0) + 
(HaveFlushDraw && `((~srankbits&0x7fff)>>srankhiplayer)==0 && FlushPossible && PairOnBoard ? 7 : 0) + 
(IsFlop && rankloplayer>rankhicommon && nplayersplaying<=4 && f$safeboard && !isonepair                                                                                                             ? 6 : 0) +
(IsFlop && rankhiplayer>rankhicommon && nplayersplaying<=4 && f$safeboard && !isonepair && !(rankloplayer>rankhicommon)                                                                              ? 3 : 0) +
(IsTurn && rankloplayer>rankhicommon && nbetsround_flop<3 && nplayersplaying==2 && NOT FlushPossible && NOT StraightPossible && nstraightfillcommon>1 && NOT PairOnBoard && !(isonepair && NOT PairOnBoard) ? 6 : 0) +
(IsTurn && rankloplayer>rankhicommon && nbetsround_flop<2 && nplayersplaying==3 && NOT FlushPossible && NOT StraightPossible && nstraightfillcommon>1 && NOT PairOnBoard && !(isonepair && NOT PairOnBoard) ? 6 : 0) +

(nstraightcommon==3 && nstraight==4 && NOT FlushPossible && NOT PairOnBoard && !f$wheeldraw      ? 4 : 0) +
(nstraightcommon==3 && nstraight==4 && NOT FlushPossible && PairOnBoard && !f$wheeldraw      ? 2 : 0) +
(nstraightcommon==2 && nstraight==4 && NOT FlushPossible && NOT PairOnBoard && !f$wheeldraw      ? 8 : 0) +         
(nstraightcommon==2 && nstraight==4 && NOT FlushPossible && PairOnBoard && !f$wheeldraw      ? 6 : 0) +
(nstraightcommon==1 && nstraight==4 && NOT FlushPossible && NOT PairOnBoard && !f$wheeldraw      ? 8 : 0) +         
(nstraightcommon==1 && nstraight==4 && NOT FlushPossible && PairOnBoard && !f$wheeldraw      ? 6 : 0) +
(nstraightcommon<=3 && nstraight==4 && NOT FlushPossible && nrankedcommon<=2 &&  f$wheeldraw      ? 4 : 0) +

(f$safeboard && ispair                                                                          ? 2 : 0) +
(f$safeboard && isonepair && !ispair && nstraightfillcommon>2                                   ? 5 : 0) +

(NOT PairOnBoard && istwopair && !TwoPairOnBoard                                                    ? 4 : 0) +
(PairOnBoard && istwopair && !TwoPairOnBoard                                                    ? 1 : 0) +

(IsFlop && isthreeofakind && PairOnBoard                                                    ? 7 : 0) +
(IsTurn && isthreeofakind && PairOnBoard                                                    ? 9 : 0) +
(IsFlop && isthreeofakind && NOT PairOnBoard                                                    ? 7 : 0) +
(IsTurn && isthreeofakind && NOT PairOnBoard                                                    ? 12: 0) +

(IsFlop && nsuited==3 && nsuitedcommon==2 && NOT PairOnBoard && srankhiplayer>12                ? 3 : 0) +
(IsFlop && nstraightfill==1 && NOT StraightPossible && nsuitedcommon<2 && NOT PairOnBoard          ? 2 : 0) + 0 ]

##f$OutOdds##
[ f$nOuts/46 ]

##f$PotOdds##
call==0 ? [ (bet/(pot+f$ImpliedOdds))  ] :
call>0  ? [ (call/(pot+f$ImpliedOdds)) ] : 0
    
##f$ImpliedOdds##
IsFlop ? ((nopponentsbetting*.50)*bet4*1.5) + (((nplayersplaying-1-nopponentsbetting)*.275)*bet4*1.25) : 
IsTurn ? ((nopponentsbetting*.50)*bet4) + (((nplayersplaying-1-nopponentsbetting)*.275)*bet4) : 0

##f$AggressionFactor##
[ IsFlop ] ? f$AggressionFactor_Flop  :
[ IsTurn ] ? f$AggressionFactor_Turn  :
[ IsRiver ] ? f$AggressionFactor_River : 0

##f$AggressionFactor_Flop##
[ call<=0 ] ? 0 :
[ call>0 && pt_hands_raischair>25 ] ? {
    [ f$PT_Flop_AF_RaisChair<=0.00 ] ? 0.00 :
    [ f$PT_Flop_AF_RaisChair>0.00 && f$PT_Flop_AF_RaisChair<=0.33 ] ? 0.40 :
    [ f$PT_Flop_AF_RaisChair>0.33 && f$PT_Flop_AF_RaisChair<=0.66 ] ? 0.35 :
    [ f$PT_Flop_AF_RaisChair>0.66 && f$PT_Flop_AF_RaisChair<=1.00 ] ? 0.25 :
    [ f$PT_Flop_AF_RaisChair>1.00 && f$PT_Flop_AF_RaisChair<=1.33 ] ? 0.15 :
    [ f$PT_Flop_AF_RaisChair>1.33 && f$PT_Flop_AF_RaisChair<=1.66 ] ? 0.05 :
    [ f$PT_Flop_AF_RaisChair>1.66 && f$PT_Flop_AF_RaisChair<=2.00 ] ? 0.00 :
    [ f$PT_Flop_AF_RaisChair>2.00 && f$PT_Flop_AF_RaisChair<=2.50 ] ? 0.00 :
    [ f$PT_Flop_AF_RaisChair>2.50 && f$PT_Flop_AF_RaisChair<=3.00 ] ? 0.00 :
    [ f$PT_Flop_AF_RaisChair>3.00 && f$PT_Flop_AF_RaisChair<=4.00 ] ? 0.00 :
    [ f$PT_Flop_AF_RaisChair>4.00 && f$PT_Flop_AF_RaisChair<=5.00 ] ? 0.00 :
    [ f$PT_Flop_AF_RaisChair>5.00                     ] ? 0.00 : 0 } : 
0

##f$AggressionFactor_Turn##
[ call<=0 ] ? {
    [ f$Initiative_Hero   ] ? 0 :
    [ f$Initiative_Nobody ] ? 0 :
    [ f$Initiative_Villian && f$pt_hands>25 ] ? {
                            f$pt_flopaf<=0.00 ? 0.00 :
        f$pt_flopaf>0.00 && f$pt_flopaf<=0.33 ? 0.50 :
        f$pt_flopaf>0.33 && f$pt_flopaf<=0.66 ? 0.40 :
        f$pt_flopaf>0.66 && f$pt_flopaf<=1.00 ? 0.30 :
        f$pt_flopaf>1.00 && f$pt_flopaf<=1.33 ? 0.20 :
        f$pt_flopaf>1.33 && f$pt_flopaf<=1.66 ? 0.10 :
        f$pt_flopaf>1.66 && f$pt_flopaf<=2.00 ? 0.00 :
        f$pt_flopaf>2.00 && f$pt_flopaf<=2.50 ? 0.00 :
        f$pt_flopaf>2.50 && f$pt_flopaf<=3.00 ? 0.00 :
        f$pt_flopaf>3.00 && f$pt_flopaf<=4.00 ? 0.00 :
        f$pt_flopaf>4.00 && f$pt_flopaf<=5.00 ? 0.00 :
        f$pt_flopaf>5.00                         ? 0.00 : 0 } : 0 } :
[ call>0 && pt_hands_raischair>25 ] ? {
  [ !didbetsize ] ? {
    [ f$PT_Turn_AF_RaisChair<=0.00 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>0.00 && f$PT_Turn_AF_RaisChair<=0.25 ] ? 0.50 :
    [ f$PT_Turn_AF_RaisChair>0.25 && f$PT_Turn_AF_RaisChair<=0.50 ] ? 0.40 :
    [ f$PT_Turn_AF_RaisChair>0.50 && f$PT_Turn_AF_RaisChair<=0.75 ] ? 0.30 :
    [ f$PT_Turn_AF_RaisChair>0.75 && f$PT_Turn_AF_RaisChair<=1.00 ] ? 0.20 :
    [ f$PT_Turn_AF_RaisChair>1.00 && f$PT_Turn_AF_RaisChair<=1.25 ] ? 0.10 :
    [ f$PT_Turn_AF_RaisChair>1.25 && f$PT_Turn_AF_RaisChair<=1.50 ] ? 0.05 :
    [ f$PT_Turn_AF_RaisChair>1.50 && f$PT_Turn_AF_RaisChair<=1.75 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>1.75 && f$PT_Turn_AF_RaisChair<=2.00 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>2.00 && f$PT_Turn_AF_RaisChair<=2.25 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>2.25 && f$PT_Turn_AF_RaisChair<=2.50 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>2.50 && f$PT_Turn_AF_RaisChair<=3.00 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>3.00 && f$PT_Turn_AF_RaisChair<=4.00 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>4.00 && f$PT_Turn_AF_RaisChair<=5.00 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>5.00                     ] ? 0.00 : 0 } : 
  [ didbetsize ] ? {
    [ f$PT_Turn_AF_RaisChair<=0.00 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>0.00 && f$PT_Turn_AF_RaisChair<=0.25 ] ? 1.00 :
    [ f$PT_Turn_AF_RaisChair>0.25 && f$PT_Turn_AF_RaisChair<=0.50 ] ? 0.65 :
    [ f$PT_Turn_AF_RaisChair>0.50 && f$PT_Turn_AF_RaisChair<=0.75 ] ? 0.50 :
    [ f$PT_Turn_AF_RaisChair>0.75 && f$PT_Turn_AF_RaisChair<=1.00 ] ? 0.33 :
    [ f$PT_Turn_AF_RaisChair>1.00 && f$PT_Turn_AF_RaisChair<=1.25 ] ? 0.16 :
    [ f$PT_Turn_AF_RaisChair>1.25 && f$PT_Turn_AF_RaisChair<=1.50 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>1.50 && f$PT_Turn_AF_RaisChair<=1.75 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>1.75 && f$PT_Turn_AF_RaisChair<=2.00 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>2.00 && f$PT_Turn_AF_RaisChair<=2.25 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>2.25 && f$PT_Turn_AF_RaisChair<=2.50 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>2.50 && f$PT_Turn_AF_RaisChair<=3.00 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>3.00 && f$PT_Turn_AF_RaisChair<=4.00 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>4.00 && f$PT_Turn_AF_RaisChair<=5.00 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>5.00                     ] ? 0.00 : 0 } : 0 } :
0

##f$AggressionFactor_River##
[ call<=0 ] ? {
    [ f$Initiative_Hero   ] ? 0 :
    [ f$Initiative_Nobody ] ? 0 :
    [ f$Initiative_Villian && f$pt_hands>25 ] ? {
        [ f$pt_turnaf<=0.00 ] ? 0.00 :
        [ f$pt_turnaf>0.00 && f$pt_turnaf<=0.25 ] ? 0.50 :
        [ f$pt_turnaf>0.25 && f$pt_turnaf<=0.50 ] ? 0.40 :
        [ f$pt_turnaf>0.50 && f$pt_turnaf<=0.75 ] ? 0.30 :
        [ f$pt_turnaf>0.75 && f$pt_turnaf<=1.00 ] ? 0.20 :
        [ f$pt_turnaf>1.00 && f$pt_turnaf<=1.25 ] ? 0.10 :
        [ f$pt_turnaf>1.25 && f$pt_turnaf<=1.50 ] ? 0.05 :
        [ f$pt_turnaf>1.50 && f$pt_turnaf<=1.75 ] ? 0.00 :
        [ f$pt_turnaf>1.75 && f$pt_turnaf<=2.00 ] ? 0.00 :
        [ f$pt_turnaf>2.00 && f$pt_turnaf<=2.25 ] ? 0.00 :
        [ f$pt_turnaf>2.25 && f$pt_turnaf<=2.50 ] ? 0.00 :
        [ f$pt_turnaf>2.50 && f$pt_turnaf<=3.00 ] ? 0.00 :
        [ f$pt_turnaf>3.00 && f$pt_turnaf<=4.00 ] ? 0.00 :
        [ f$pt_turnaf>4.00 && f$pt_turnaf<=5.00 ] ? 0.00 :
        [ f$pt_turnaf>5.00 ] ? 0.00 : 0 } : 0 } :
[ call>0 && pt_hands_raischair>25 ] ? {
  [ !didbetsize ] ? {
    [ f$PT_River_AF_RaisChair<=0.00 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>0.00 && f$PT_River_AF_RaisChair<=0.25 ] ? 0.50 :
    [ f$PT_River_AF_RaisChair>0.25 && f$PT_River_AF_RaisChair<=0.50 ] ? 0.40 :
    [ f$PT_River_AF_RaisChair>0.50 && f$PT_River_AF_RaisChair<=0.75 ] ? 0.30 :
    [ f$PT_River_AF_RaisChair>0.75 && f$PT_River_AF_RaisChair<=1.00 ] ? 0.20 :
    [ f$PT_River_AF_RaisChair>1.00 && f$PT_River_AF_RaisChair<=1.25 ] ? 0.10 :
    [ f$PT_River_AF_RaisChair>1.25 && f$PT_River_AF_RaisChair<=1.50 ] ? 0.05 :
    [ f$PT_River_AF_RaisChair>1.50 && f$PT_River_AF_RaisChair<=1.75 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>1.75 && f$PT_River_AF_RaisChair<=2.00 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>2.00 && f$PT_River_AF_RaisChair<=2.25 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>2.25 && f$PT_River_AF_RaisChair<=2.50 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>2.50 && f$PT_River_AF_RaisChair<=3.00 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>3.00 && f$PT_River_AF_RaisChair<=4.00 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>4.00 && f$PT_River_AF_RaisChair<=5.00 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>5.00                     ] ? 0.00 : 0 } : 
  [ didbetsize ] ? {
    [ f$PT_River_AF_RaisChair<=0.00 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>0.00 && f$PT_River_AF_RaisChair<=0.25 ] ? 1.00 :
    [ f$PT_River_AF_RaisChair>0.25 && f$PT_River_AF_RaisChair<=0.50 ] ? 0.65 :
    [ f$PT_River_AF_RaisChair>0.50 && f$PT_River_AF_RaisChair<=0.75 ] ? 0.50 :
    [ f$PT_River_AF_RaisChair>0.75 && f$PT_River_AF_RaisChair<=1.00 ] ? 0.33 :
    [ f$PT_River_AF_RaisChair>1.00 && f$PT_River_AF_RaisChair<=1.25 ] ? 0.16 :
    [ f$PT_River_AF_RaisChair>1.25 && f$PT_River_AF_RaisChair<=1.50 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>1.50 && f$PT_River_AF_RaisChair<=1.75 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>1.75 && f$PT_River_AF_RaisChair<=2.00 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>2.00 && f$PT_River_AF_RaisChair<=2.25 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>2.25 && f$PT_River_AF_RaisChair<=2.50 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>2.50 && f$PT_River_AF_RaisChair<=3.00 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>3.00 && f$PT_River_AF_RaisChair<=4.00 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>4.00 && f$PT_River_AF_RaisChair<=5.00 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>5.00 ] ? 0.00 : 0 } : 0 } :
0

##f$threat##
IsFlop  ? (f$AggressionFactor_Flop+f$foldequity+f$villiantakeover+f$reducewinchance_when_have_twopair)  :
IsTurn  ? (f$AggressionFactor_Turn+f$foldequity+f$villiantakeover+f$reducewinchance_when_have_twopair)  :
IsRiver ?(f$AggressionFactor_River+f$foldequity+f$villiantakeover+f$reducewinchance_when_have_twopair) : 0

##f$TightFactor##
[ nbetsround_preflop<=1 ] ? 1 :
[ nbetsround_preflop>1 && nbetsround_preflop<=5 ] ? {
    [ didbetsizeround_preflop ] ? 1.0 :
    [ didcallround_preflop ] ? 0.8 : 0 } :
[ nbetsround_preflop>5 && nbetsround_preflop<20 ] ? {
    [ didbetsizeround_preflop && !didcallround_preflop ] ? 0.8 :
    [ didbetsizeround_preflop &&  didcallround_preflop ] ? 0.6 :
    [ didcallround_preflop && !didbetsizeround_preflop ] ? 0.7 : 0 } :
[ nbetsround_preflop>20 ] ? 0.6 : 1

##f$flop_call_initiative##
[ Position = First ] ? {
    [ f$actionpostflop_2 ] ? f$prwin1>.15 :
    [ f$actionpostflop_3 ] ? f$prwin1>.60 :
    [ f$actionpostflop_4 ] ? f$prwin1>.65 :
    [ f$actionpostflop_5 ] ? f$prwin1>.70 :
    [ f$actionpostflop_6 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.80 :
        [ f$ptype_nit     ] ? f$prwin2>.78 :
        [ f$ptype_tag     ] ? f$prwin2>.75 :
        [ f$ptype_semilag ] ? f$prwin2>.72 :
        [ f$ptype_lag     ] ? f$prwin2>.70 : 0 } :
    [ f$actionpostflop_7 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.84 :
        [ f$ptype_nit     ] ? f$prwin2>.80 :
        [ f$ptype_tag     ] ? f$prwin2>.78 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.74 : 0 } :
    [ f$actionpostflop_8 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.78 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.74 : 0 } :
    [ f$actionpostflop_9 ] ? f$prwin1>.82 :
    [ f$actionpostflop_10] ? f$prwin1>.86 : 0 } :
[ Position = Middle ] ? {
    [ f$actionpostflop_2 ] ? f$prwin1>.15 :
    [ f$actionpostflop_3 ] ? f$prwin1>.60 :
    [ f$actionpostflop_4 ] ? f$prwin1>.65 :
    [ f$actionpostflop_5 ] ? f$prwin1>.70 :
    [ f$actionpostflop_6 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.82 :
        [ f$ptype_nit     ] ? f$prwin2>.80 :
        [ f$ptype_tag     ] ? f$prwin2>.78 :
        [ f$ptype_semilag ] ? f$prwin2>.75 :
        [ f$ptype_lag     ] ? f$prwin2>.72 : 0 } :
    [ f$actionpostflop_7 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.80 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.74 : 0 } :
    [ f$actionpostflop_8 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.80 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.74 : 0 } :
    [ f$actionpostflop_9 ] ? f$prwin1>.82 :
    [ f$actionpostflop_10] ? f$prwin1>.86 : 0 } :
[ Position = Last ] ? {
    [ f$actionpostflop_2 ] ? f$prwin1>.15 :
    [ f$actionpostflop_3 ] ? f$prwin1>.60 :
    [ f$actionpostflop_4 ] ? f$prwin1>.65 :
    [ f$actionpostflop_5 ] ? f$prwin1>.70 :
    [ f$actionpostflop_6 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.80 :
        [ f$ptype_nit     ] ? f$prwin2>.78 :
        [ f$ptype_tag     ] ? f$prwin2>.75 :
        [ f$ptype_semilag ] ? f$prwin2>.72 :
        [ f$ptype_lag     ] ? f$prwin2>.70 : 0 } :
    [ f$actionpostflop_7 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.78 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.74 : 0 } :
    [ f$actionpostflop_8 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.79 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.74 : 0 } :
    [ f$actionpostflop_9 ] ? f$prwin1>.82 :
    [ f$actionpostflop_10] ? f$prwin1>.86 : 0 } :
0

##f$flop_call_noaction##
[ Position = First ] ? {
    [ f$actionpostflop_2 ] ? f$prwin1>.50 :
    [ f$actionpostflop_3 ] ? f$prwin1>.60 :
    [ f$actionpostflop_4 ] ? f$prwin1>.65 :
    [ f$actionpostflop_5 ] ? f$prwin1>.70 :
    [ f$actionpostflop_6 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.80 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.74 : 0 } :
    [ f$actionpostflop_7 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.80 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.74 : 0 } :
    [ f$actionpostflop_8 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.80 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.74 : 0 } :
    [ f$actionpostflop_9 ] ? f$prwin1>.82 :
    [ f$actionpostflop_10] ? f$prwin1>.86 : 0 } :
[ Position = Middle ] ? {
    [ f$actionpostflop_2 ] ? f$prwin1>.50 :
    [ f$actionpostflop_3 ] ? f$prwin1>.60 :
    [ f$actionpostflop_4 ] ? f$prwin1>.65 :
    [ f$actionpostflop_5 ] ? f$prwin1>.70 :
    [ f$actionpostflop_6 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.80 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.74 : 0 } :
    [ f$actionpostflop_7 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.80 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.74 : 0 } :
    [ f$actionpostflop_8 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.80 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.74 : 0 } :
    [ f$actionpostflop_9 ] ? f$prwin1>.82 :
    [ f$actionpostflop_10] ? f$prwin1>.86 : 0 } :
[ Position = Last ] ? {
    [ f$actionpostflop_2 ] ? f$prwin1>.60 :
    [ f$actionpostflop_3 ] ? f$prwin1>.65 :
    [ f$actionpostflop_4 ] ? f$prwin1>.70 :
    [ f$actionpostflop_5 ] ? f$prwin1>.80 :
    [ f$actionpostflop_6 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.80 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.74 : 0 } :
    [ f$actionpostflop_7 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.80 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.74 : 0 } :
    [ f$actionpostflop_8 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.80 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.74 : 0 } :
    [ f$actionpostflop_9 ] ? f$prwin1>.82 :
    [ f$actionpostflop_10] ? f$prwin1>.86 : 0 } :
0

##f$flop_call_noinitiative##
[ Position = First ] ? {
    [ f$actionpostflop_2 ] ? f$prwin1>.15 :
    [ f$actionpostflop_3 ] ? f$prwin1>.60 :
    [ f$actionpostflop_4 ] ? f$prwin1>.65 :
    [ f$actionpostflop_5 ] ? f$prwin1>.70 :
    [ f$actionpostflop_6 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.80 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.74 : 0 } :
    [ f$actionpostflop_7 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.80 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.74 : 0 } :
    [ f$actionpostflop_8 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.80 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.74 : 0 } :
    [ f$actionpostflop_9 ] ? f$prwin1>.82 :
    [ f$actionpostflop_10] ? f$prwin1>.86 : 0 } :
[ Position = Middle ] ? {
    [ f$actionpostflop_2 ] ? f$prwin1>.15 :
    [ f$actionpostflop_3 ] ? f$prwin1>.60 :
    [ f$actionpostflop_4 ] ? f$prwin1>.65 :
    [ f$actionpostflop_5 ] ? f$prwin1>.70 :
    [ f$actionpostflop_6 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.80 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.74 : 0 } :
    [ f$actionpostflop_7 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.80 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.74 : 0 } :
    [ f$actionpostflop_8 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.80 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.74 : 0 } :
    [ f$actionpostflop_9 ] ? f$prwin1>.82 :
    [ f$actionpostflop_10] ? f$prwin1>.86 : 0 } :
[ Position = Last ] ? {
    [ f$actionpostflop_2 ] ? f$prwin1>.15 :
    [ f$actionpostflop_3 ] ? f$prwin1>.60 :
    [ f$actionpostflop_4 ] ? f$prwin1>.65 :
    [ f$actionpostflop_5 ] ? f$prwin1>.70 :
    [ f$actionpostflop_6 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.80 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.74 : 0 } :
    [ f$actionpostflop_7 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.80 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.74 : 0 } :
    [ f$actionpostflop_8 ] ? {
        [ f$ptype_ubernit ] ? f$prwin2>.85 :
        [ f$ptype_nit     ] ? f$prwin2>.82 :
        [ f$ptype_tag     ] ? f$prwin2>.80 :
        [ f$ptype_semilag ] ? f$prwin2>.77 :
        [ f$ptype_lag     ] ? f$prwin2>.74 : 0 } :
    [ f$actionpostflop_9 ] ? f$prwin1>.82 :
    [ f$actionpostflop_10] ? f$prwin1>.86 : 0 } :
0

##f$turn_call_initiative##
[ Position = First ] ? {
    [ f$actionpostflop_2 ] ? f$prwin1>.55 :
    [ f$actionpostflop_3 ] ? f$prwin1>.75 :
    [ f$actionpostflop_4 ] ? f$prwin1>.77 :
    [ f$actionpostflop_5 ] ? f$prwin1>.95 :
    [ f$actionpostflop_6 ] ? f$prwin1>.82 :
    [ f$actionpostflop_7 ] ? f$prwin1>.95 :
    [ f$actionpostflop_8 ] ? f$prwin1>.95 :
    [ f$actionpostflop_9 ] ? f$prwin1>.95 :
    [ f$actionpostflop_10] ? f$prwin1>.97 : 0 } :
[ Position = Middle ] ? {
    [ f$actionpostflop_2 ] ? f$prwin1>.60 :
    [ f$actionpostflop_3 ] ? f$prwin1>.80 :
    [ f$actionpostflop_4 ] ? f$prwin1>.80 :
    [ f$actionpostflop_5 ] ? f$prwin1>.95 :
    [ f$actionpostflop_6 ] ? f$prwin1>.85 :
    [ f$actionpostflop_7 ] ? f$prwin1>.95 :
    [ f$actionpostflop_8 ] ? f$prwin1>.95 :
    [ f$actionpostflop_9 ] ? f$prwin1>.95 :
    [ f$actionpostflop_10] ? f$prwin1>.97 : 0 } :
[ Position = Last ] ? {
    [ f$actionpostflop_2 ] ? f$prwin1>.60 :
    [ f$actionpostflop_3 ] ? f$prwin1>.75 :
    [ f$actionpostflop_4 ] ? f$prwin1>.77 :
    [ f$actionpostflop_5 ] ? f$prwin1>.95 :
    [ f$actionpostflop_6 ] ? f$prwin1>.85 :
    [ f$actionpostflop_7 ] ? f$prwin1>.95 :
    [ f$actionpostflop_8 ] ? f$prwin1>.95 :
    [ f$actionpostflop_9 ] ? f$prwin1>.95 :
    [ f$actionpostflop_10] ? f$prwin1>.97 : 0 } :
0

##f$river_call_initiative##
[ f$actionpostflop_2 ] ? f$prwin1>.50 :
[ f$actionpostflop_3 ] ? {
    [ nplayersplaying==2 ] ? f$prwin>.65 :
    [ nplayersplaying>=3 ] ? f$prwin>.70 : 0 } :
[ f$actionpostflop_4 ] ? {
    [ nplayersplaying==2 ] ? f$prwin>.80 :
    [ nplayersplaying>=3 ] ? f$prwin>.75 : 0 } :
[ f$actionpostflop_5 ] ? {
    [ nplayersplaying==2 ] ? f$prwin>.90 :
    [ nplayersplaying>=3 ] ? f$prwin>.95 : 0 } :
[ f$actionpostflop_6  ] ? f$prwin1>.78 :
[ f$actionpostflop_7  ] ? f$prwin1>.82 :
[ f$actionpostflop_8  ] ? f$prwin1>.95 :
[ f$actionpostflop_9  ] ? f$prwin1>.95 :
[ f$actionpostflop_10 ] ? f$prwin1>.97 :
0

##f$turn_call_noaction##
[ Position = First ] ? {
    [ f$actionpostflop_2 ] ? f$prwin1>.50 :
    [ f$actionpostflop_3 ] ? f$prwin1>.75 :
    [ f$actionpostflop_4 ] ? f$prwin1>.78 :
    [ f$actionpostflop_5 ] ? f$prwin1>.95 :
    [ f$actionpostflop_6 ] ? f$prwin1>.78 :
    [ f$actionpostflop_7 ] ? f$prwin1>.85 :
    [ f$actionpostflop_8 ] ? f$prwin1>.95 :
    [ f$actionpostflop_9 ] ? f$prwin1>.95 :
    [ f$actionpostflop_10] ? f$prwin1>.97 : 0 } :
[ Position = Middle ] ? {
    [ f$actionpostflop_2 ] ? f$prwin1>.55 :
    [ f$actionpostflop_3 ] ? f$prwin1>.75 :
    [ f$actionpostflop_4 ] ? f$prwin1>.78 :
    [ f$actionpostflop_5 ] ? f$prwin1>.95 :
    [ f$actionpostflop_6 ] ? f$prwin1>.80 :
    [ f$actionpostflop_7 ] ? f$prwin1>.85 :
    [ f$actionpostflop_8 ] ? f$prwin1>.95 :
    [ f$actionpostflop_9 ] ? f$prwin1>.95 :
    [ f$actionpostflop_10] ? f$prwin1>.97 : 0 } :
[ Position = Last ] ? {
    [ f$actionpostflop_2 ] ? f$prwin1>.60 :
    [ f$actionpostflop_3 ] ? f$prwin1>.75 :
    [ f$actionpostflop_4 ] ? f$prwin1>.78 :
    [ f$actionpostflop_5 ] ? f$prwin1>.95 :
    [ f$actionpostflop_6 ] ? f$prwin1>.82 :
    [ f$actionpostflop_7 ] ? f$prwin1>.86 :
    [ f$actionpostflop_8 ] ? f$prwin1>.95 :
    [ f$actionpostflop_9 ] ? f$prwin1>.95 :
    [ f$actionpostflop_10] ? f$prwin1>.97 : 0 } :
0

##f$river_call_noaction##
[ f$actionpostflop_2 ] ? f$prwin1>.50 :
[ f$actionpostflop_3 ] ? {
    [ nplayersplaying==2 ] ? f$prwin>.65 :
    [ nplayersplaying>=3 ] ? f$prwin>.70 : 0 } :
[ f$actionpostflop_4 ] ? {
    [ nplayersplaying==2 ] ? f$prwin>.80 :
    [ nplayersplaying>=3 ] ? f$prwin>.75 : 0 } :
[ f$actionpostflop_5 ] ? {
    [ nplayersplaying==2 ] ? f$prwin>.90 :
    [ nplayersplaying>=3 ] ? f$prwin>.95 : 0 } :
[ f$actionpostflop_6  ] ? f$prwin1>.78 :
[ f$actionpostflop_7  ] ? f$prwin1>.82 :
[ f$actionpostflop_8  ] ? f$prwin1>.95 :
[ f$actionpostflop_9  ] ? f$prwin1>.95 :
[ f$actionpostflop_10 ] ? f$prwin1>.97 :
0

##f$river_call_noinitiative##
[ f$actionpostflop_2 ] ? f$prwin1>.50 :
[ f$actionpostflop_3 ] ? {
    [ nplayersplaying==2 ] ? f$prwin>.65 :
    [ nplayersplaying>=3 ] ? f$prwin>.70 : 0 } :
[ f$actionpostflop_4 ] ? {
    [ nplayersplaying==2 ] ? f$prwin>.80 :
    [ nplayersplaying>=3 ] ? f$prwin>.75 : 0 } :
[ f$actionpostflop_5 ] ? {
    [ nplayersplaying==2 ] ? f$prwin>.90 :
    [ nplayersplaying>=3 ] ? f$prwin>.95 : 0 } :
[ f$actionpostflop_6  ] ? f$prwin1>.78 :
[ f$actionpostflop_7  ] ? f$prwin1>.82 :
[ f$actionpostflop_8  ] ? f$prwin1>.95 :
[ f$actionpostflop_9  ] ? f$prwin1>.95 :
[ f$actionpostflop_10 ] ? f$prwin1>.97 :
0

##f$turn_call_noinitiative##
[ Position = First ] ? {
    [ f$actionpostflop_2 ] ? f$prwin1>.50 :
    [ f$actionpostflop_3 ] ? f$prwin1>.70 :
    [ f$actionpostflop_4 ] ? f$prwin1>.70 :
    [ f$actionpostflop_5 ] ? f$prwin1>.90 :
    [ f$actionpostflop_6 ] ? f$prwin1>.82 :
    [ f$actionpostflop_7 ] ? f$prwin1>.88 :
    [ f$actionpostflop_8 ] ? f$prwin1>.95 :
    [ f$actionpostflop_9 ] ? f$prwin1>.95 :
    [ f$actionpostflop_10] ? f$prwin1>.97 : 0 } :
[ Position = Middle ] ? {
    [ f$actionpostflop_2 ] ? f$prwin1>.55 :
    [ f$actionpostflop_3 ] ? f$prwin1>.70 :
    [ f$actionpostflop_4 ] ? f$prwin1>.70 :
    [ f$actionpostflop_5 ] ? f$prwin1>.90 :
    [ f$actionpostflop_6 ] ? f$prwin1>.80 :
    [ f$actionpostflop_7 ] ? f$prwin1>.90 :
    [ f$actionpostflop_8 ] ? f$prwin1>.95 :
    [ f$actionpostflop_9 ] ? f$prwin1>.95 :
    [ f$actionpostflop_10] ? f$prwin1>.97 : 0 } :
[ Position = Last ] ? {
    [ f$actionpostflop_2 ] ? f$prwin1>.50 :
    [ f$actionpostflop_3 ] ? f$prwin1>.70 :
    [ f$actionpostflop_4 ] ? f$prwin1>.70 :
    [ f$actionpostflop_5 ] ? f$prwin1>.95 :
    [ f$actionpostflop_6 ] ? f$prwin1>.85 :
    [ f$actionpostflop_7 ] ? f$prwin1>.90 :
    [ f$actionpostflop_8 ] ? f$prwin1>.95 :
    [ f$actionpostflop_9 ] ? f$prwin1>.95 :
    [ f$actionpostflop_10] ? f$prwin1>.97 : 0 } :
0

##f$effective_balance_to_call_ratio##
WHEN (call <= 0) RETURN StackSize FORCE
WHEN ((balance + currentbet) <= f$stackraiser) RETURN ((balance + currentbet) / call) FORCE
WHEN Others RETURN (f$stackraiser / call) FORCE

##f$required_balance_to_call_ratio_for_setmining##
// Higher requirements in unraised pots, less likely to get action postflop
// Higher requirements OOP
// http://www.maxinmontreal.com/forums/viewtopic.php?f=297&t=21070&start=60#p147986
WHEN (BotsLastAction = None)
   WHEN (Raises = 0) RETURN 20 FORCE
   WHEN ((Raises = 1) AND ac_agchair_after) RETURN 15 FORCE
   WHEN ((Raises = 1) AND NOT ac_agchair_after) RETURN 12 FORCE
WHEN (BotsLastAction = Call) 
   WHEN ((RaisesSinceLastPlay = 1) AND ac_agchair_after) RETURN 12 FORCE
   WHEN ((RaisesSinceLastPlay = 1) AND NOT ac_agchair_after) RETURN 10 FORCE
WHEN (BotsLastAction = Raise) 
   WHEN ((RaisesSinceLastPlay = 1) AND ac_agchair_after) RETURN 12 FORCE
   WHEN ((RaisesSinceLastPlay = 1) AND NOT ac_agchair_after) RETURN 10 FORCE   
WHEN Others
   // Multiple raises, we don't want to call
   WHEN Others RETURN 999 FORCE
   
##f$preflop_call_for_setmining##
// Rules are the same for raised and reraised pots.
// Different balance-to-call-ratios get handled by f$required_balance_to_call_ratio_for_setmining.
// "Setmining"-range also contains some premium-hands
WHEN (f$effective_balance_to_call_ratio < f$required_balance_to_call_ratio_for_setmining) RETURN false FORCE
WHEN (call > 0.50 * pot) RETURN false FORCE
WHEN listGeckoSetMining RETURN true FORCE

##f$preflop_call_reraise##
// Call any min-reraise
WHEN [didbetsize AND (4 * call < pot)] RETURN true FORCE
// With premium hands we make action.
// Raises after setmining get handled be f$preflop_call_for_setmining.
   
##f$preflop_limp_good_hand##
WHEN [(ncallbets >= 1] RETURN false FORCE
WHEN [BotsLastAction != None] RETURN false FORCE
WHEN [(StillToAct >= 5) AND (handrank169 < 50)] RETURN true FORCE
WHEN [nopponentscalling==0 AND ispair] RETURN true FORCE
WHEN [nopponentscalling==1 AND listGeckoLimpAgainstOneOpponent] RETURN true FORCE
WHEN [nopponentscalling>=2 && (listGeckoLimpMultiway)] RETURN true FORCE
   
##f$preflop_call##
WHEN (hand$AA OR hand$KK) RETURN true FORCE
WHEN f$preflop_call_for_setmining RETURN true FORCE
WHEN f$preflop_call_reraise RETURN true FORCE
WHEN f$preflop_limp_good_hand RETURN true FORCE
  
##f$stackopponent##
balance_headsupchair

##f$stackraiser##
WHEN (raischair >= 0) RETURN (balance_raischair + currentbet_raischair) FORCE

##f$preflop_aggressor##
[ nplayersround_flop>=3 && nplayersplaying==2 ]

##f$foldequity##
[ f$Initiative_Nobody && nplayersplaying==2 && call==0 && f$pt_hands>50 ] ? {
    [ Position = First ] ? {
        [ IsFlop && pot<6*bblind ] ? {
            [                      f$pt_wtsd<=0.00 ] ?  0.00 :
            [ f$pt_wtsd>0.00 && f$pt_wtsd<=0.10 ] ? -0.50 :
            [ f$pt_wtsd>0.10 && f$pt_wtsd<=0.15 ] ? -0.30 :
            [ f$pt_wtsd>0.15 && f$pt_wtsd<=0.20 ] ? -0.20 :
            [ f$pt_wtsd>0.20 && f$pt_wtsd<=0.25 ] ? -0.05 :
            [ f$pt_wtsd>0.25 && f$pt_wtsd<=0.30 ] ?  0.05 :
            [ f$pt_wtsd>0.30 && f$pt_wtsd<=0.40 ] ?  0.15 :
            [ f$pt_wtsd>0.40 && f$pt_wtsd<=0.50 ] ?  0.30 :
            [ f$pt_wtsd>0.50 && f$pt_wtsd<=0.70 ] ?  0.40 :
            [ f$pt_wtsd>0.70                       ] ?  0.50 : 0 } :
        [ IsTurn && pot<12*bblind ] ? {
            [                      f$pt_wtsd<=0.00 ] ?  0.00 :
            [ f$pt_wtsd>0.00 && f$pt_wtsd<=0.10 ] ? -0.50 :
            [ f$pt_wtsd>0.10 && f$pt_wtsd<=0.15 ] ? -0.30 :
            [ f$pt_wtsd>0.15 && f$pt_wtsd<=0.20 ] ? -0.20 :
            [ f$pt_wtsd>0.20 && f$pt_wtsd<=0.25 ] ? -0.05 :
            [ f$pt_wtsd>0.25 && f$pt_wtsd<=0.30 ] ?  0.05 :
            [ f$pt_wtsd>0.30 && f$pt_wtsd<=0.40 ] ?  0.15 :
            [ f$pt_wtsd>0.40 && f$pt_wtsd<=0.50 ] ?  0.30 :
            [ f$pt_wtsd>0.50 && f$pt_wtsd<=0.70 ] ?  0.40 :
            [ f$pt_wtsd>0.70                       ] ?  0.50 : 0 } :
        [ IsRiver && !didcallround_flop && pot<32*bblind ] ? {
            [                      f$pt_wtsd<=0.00 ] ?  0.00 :
            [ f$pt_wtsd>0.00 && f$pt_wtsd<=0.10 ] ? -0.50 :
            [ f$pt_wtsd>0.10 && f$pt_wtsd<=0.15 ] ? -0.30 :
            [ f$pt_wtsd>0.15 && f$pt_wtsd<=0.20 ] ? -0.20 :
            [ f$pt_wtsd>0.20 && f$pt_wtsd<=0.25 ] ? -0.05 :
            [ f$pt_wtsd>0.25 && f$pt_wtsd<=0.30 ] ?  0.05 :
            [ f$pt_wtsd>0.30 && f$pt_wtsd<=0.40 ] ?  0.15 :
            [ f$pt_wtsd>0.40 && f$pt_wtsd<=0.50 ] ?  0.30 :
            [ f$pt_wtsd>0.50 && f$pt_wtsd<=0.70 ] ?  0.40 :
            [ f$pt_wtsd>0.70                       ] ?  0.50 : 0 } : 0 } :
    [ Position = Last ] ? {
        [ IsFlop && pot<6*bblind ] ? {
            [                      f$pt_wtsd<=0.00 ] ?  0.00 :
            [ f$pt_wtsd>0.00 && f$pt_wtsd<=0.10 ] ? -0.50 :
            [ f$pt_wtsd>0.10 && f$pt_wtsd<=0.15 ] ? -0.30 :
            [ f$pt_wtsd>0.15 && f$pt_wtsd<=0.20 ] ? -0.20 :
            [ f$pt_wtsd>0.20 && f$pt_wtsd<=0.25 ] ? -0.05 :
            [ f$pt_wtsd>0.25 && f$pt_wtsd<=0.30 ] ?  0.05 :
            [ f$pt_wtsd>0.30 && f$pt_wtsd<=0.40 ] ?  0.15 :
            [ f$pt_wtsd>0.40 && f$pt_wtsd<=0.50 ] ?  0.30 :
            [ f$pt_wtsd>0.50 && f$pt_wtsd<=0.70 ] ?  0.40 :
            [ f$pt_wtsd>0.70                       ] ?  0.50 : 0 } :
        [ IsTurn && pot<12*bblind ] ? {
            [                      f$pt_wtsd<=0.00 ] ?  0.00 :
            [ f$pt_wtsd>0.00 && f$pt_wtsd<=0.10 ] ? -0.50 :
            [ f$pt_wtsd>0.10 && f$pt_wtsd<=0.15 ] ? -0.30 :
            [ f$pt_wtsd>0.15 && f$pt_wtsd<=0.20 ] ? -0.20 :
            [ f$pt_wtsd>0.20 && f$pt_wtsd<=0.25 ] ? -0.05 :
            [ f$pt_wtsd>0.25 && f$pt_wtsd<=0.30 ] ?  0.05 :
            [ f$pt_wtsd>0.30 && f$pt_wtsd<=0.40 ] ?  0.15 :
            [ f$pt_wtsd>0.40 && f$pt_wtsd<=0.50 ] ?  0.30 :
            [ f$pt_wtsd>0.50 && f$pt_wtsd<=0.70 ] ?  0.40 :
            [ f$pt_wtsd>0.70                       ] ?  0.50 : 0 } :
        [ IsRiver && !didcallround_flop && pot<32*bblind ] ? {
            [                      f$pt_wtsd<=0.00 ] ?  0.00 :
            [ f$pt_wtsd>0.00 && f$pt_wtsd<=0.10 ] ? -0.50 :
            [ f$pt_wtsd>0.10 && f$pt_wtsd<=0.15 ] ? -0.30 :
            [ f$pt_wtsd>0.15 && f$pt_wtsd<=0.20 ] ? -0.20 :
            [ f$pt_wtsd>0.20 && f$pt_wtsd<=0.25 ] ? -0.05 :
            [ f$pt_wtsd>0.25 && f$pt_wtsd<=0.30 ] ?  0.05 :
            [ f$pt_wtsd>0.30 && f$pt_wtsd<=0.40 ] ?  0.15 :
            [ f$pt_wtsd>0.40 && f$pt_wtsd<=0.50 ] ?  0.30 :
            [ f$pt_wtsd>0.50 && f$pt_wtsd<=0.70 ] ?  0.40 :
            [ f$pt_wtsd>0.70                       ] ?  0.50 : 0 } : 0 } :
0 } :
0

##f$Preflop_First_In##
(f$BettingAction_First_In && f$Chart_OpenRaise) ? 1 : 0

##f$Preflop_Raise_After_Three_Limpers##
(f$BettingAction_Three_Limpers_Or_More && f$Chart_MultiLimpers) ? 1 : 0

##f$Preflop_Raise_After_Two_Limpers##
(f$BettingAction_Two_Limpers && f$Chart_TwoLimpers) ? 1 : 0

##f$Preflop_Raiser_And_Callers_In_Front_Of_Me##
(f$BettingAction_One_Raiser_And_Callers_In_Front_Of_Us && listGeckoSqueeze) ? 1 : 0

##f$Preflop_Multiple_Raisers##
(Raises >= 2 && listGeckoMultipleRaisers) ? 1 : 0

##f$Preflop_React_To_Reraise##
WHEN NOT IsPreflop RETURN false FORCE
WHEN NOT f$BettingAction_Hero_Did_Already_Act RETURN false FORCE
WHEN (RaisesSinceLastPlay == 1) AND listGeckoSingleRaiserBehindUs RETURN true FORCE
WHEN (RaisesSinceLastPlay >= 2) AND listGeckoMultipleRaisersBehindUs RETURN true FORCE

##f$Preflop_Raise_After_One_Limper##
(f$BettingAction_One_Limper && f$Chart_OneLimper) ? 1 : 0

##f$Preflop_Raiser_In_Front_Of_Me##
(f$BettingAction_Single_Raiser_Before_Us && !didbetsize && call<7*bblind && f$Chart_ReRaise) ? 1 :
(hand$AA||hand$KK||hand$QQ) ? 1 : 0

##f$BettingAction_Number_Of_Opponents_Truely_Playing##
(`f$Bits_Opponents_Truely_Playing)      

##f$Bits_Opponents_Truely_Playing##
(opponentsplayingbits & [~f$Bits_Players_Allin])

##f$Bits_Players_Allin##
0 
| ((balance0 == 0) ? 0x0001 : 0)
| ((balance1 == 0) ? 0x0002 : 0)
| ((balance2 == 0) ? 0x0004 : 0)
| ((balance3 == 0) ? 0x0008 : 0)
| ((balance4 == 0) ? 0x0010 : 0)
| ((balance5 == 0) ? 0x0020 : 0)
| ((balance6 == 0) ? 0x0040 : 0)
| ((balance7 == 0) ? 0x0080 : 0)
| ((balance8 == 0) ? 0x0100 : 0)
| ((balance9 == 0) ? 0x0200 : 0)        

##f$BettingAction_Unraised_Pot##
(ncallbets<=1)

##f$BettingAction_Raised_Pot##
!f$BettingAction_Unraised_Pot 

##f$BettingAction_Number_Of_Raisers_Preflop##
(`f$Bits_Players_Truely_Raising_Preflop)

##f$Bits_Players_Truely_Raising_Preflop##
(raisbits1 & f$Bits_Players_With_More_Than_One_Bet)

##f$Bits_Players_With_More_Than_One_Bet##
0 
| ((currentbet0 > bet) ? 0x0001 : 0)
| ((currentbet1 > bet) ? 0x0002 : 0)
| ((currentbet2 > bet) ? 0x0004 : 0)
| ((currentbet3 > bet) ? 0x0008 : 0)
| ((currentbet4 > bet) ? 0x0010 : 0)
| ((currentbet5 > bet) ? 0x0020 : 0)
| ((currentbet6 > bet) ? 0x0040 : 0)
| ((currentbet7 > bet) ? 0x0080 : 0)
| ((currentbet8 > bet) ? 0x0100 : 0)
| ((currentbet9 > bet) ? 0x0200 : 0)

##f$THIS_MUST_NOT_HAPPEN##
log$SERIOUS_ERROR 

##f$BettingAction_First_In##
(f$BettingAction_Unraised_Pot && nopponentscalling<=0)

##f$Chart_OpenRaise##
   [ InSmallBlind && listGecko900 ] // 50%
|| [ InButton && listGecko900 ] // 40%
|| [ InCutOff && listGecko05  ] // 27%
|| [ InMiddlePosition3 && listGecko02  ] // 15%
|| [ InMiddlePosition2 && listGecko01  ] // 10%
// Extended to full-ring, not original Gecko
|| [ InMiddlePosition1 && listGecko_OpenRaise_MP1 ] // 10%
|| [ InEarlyPosition3 && listGecko_OpenRaise_EP3  ] // 10%
|| [ InEarlyPosition2 && listGecko_OpenRaise_EP2  ] // 10%
|| [ InEarlyPosition1 && listGecko_OpenRaise_EP1  ] // 10%

##f$BettingAction_Hero_Did_Already_Act##
(didrais || didcall || didchec || didbetsize)

##f$BettingAction_Single_Raiser_Before_Us##
(f$BettingAction_Number_Of_Raisers_Preflop==1 && Raises == 1)

##f$Chart_ReRaise##
[ InSmallBlind ] ? { // sb
    [ f$logicalpositionrais==3 ] ? listGecko13 : // 04%
    [ f$logicalpositionrais==4 ] ? listGecko14 : // 08%
    [ f$logicalpositionrais==5 ] ? listGecko15 : // 12%
    [ f$logicalpositionrais==6 ] ? listGecko02 : // 15%
	0 } :
[ InBigBlind ] ? { // bb
    [ f$logicalpositionrais==1 ] ? listGecko03 : // 04%
    [ f$logicalpositionrais==3 ] ? listGecko13 : // 04%
    [ f$logicalpositionrais==4 ] ? listGecko14 : // 08%
    [ f$logicalpositionrais==5 ] ? listGecko15 : // 12%
    [ f$logicalpositionrais==6 ] ? listGecko02 : // 15%
	0 } :
[ InMiddlePosition3 ] ? { // utg+1
    [ f$logicalpositionrais==3 ] ? listGecko13 : 0 } : // 04%
[ InCutOff ] ? { // co
    [ f$logicalpositionrais==3 ] ? listGecko13 :       // 04%
    [ f$logicalpositionrais==4 ] ? listGecko14 : 0 } : // 08%
[ InButton ] ? { // button
    [ f$logicalpositionrais==3 ] ? listGecko13 :       // 04%
    [ f$logicalpositionrais==4 ] ? listGecko14 :       // 08%
    [ f$logicalpositionrais==5 ] ? listGecko15 : 0 } : // 12%
0

##f$BettingAction_One_Raiser_And_Callers_In_Front_Of_Us##
((f$BettingAction_Number_Of_Raisers_Preflop == 1) && (nopponentscalling >= 1))

##f$BettingAction_One_Limper##
(nopponentscalling == 1 && ncallbets<=1)

##f$BettingAction_Two_Limpers##
(nopponentscalling == 2 && ncallbets<=1)

##f$BettingAction_Three_Limpers_Or_More##
(nopponentscalling >= 3 && ncallbets<=1)

##f$Chart_MultiLimpers##
   (InMiddlePosition2       && listGecko01)
|| (InMiddlePosition3       && listGecko01)
|| (InCutOff     && listGecko01)
|| (InButton     && listGecko01)
|| (InSmallBlind && listGecko01)
|| (InBigBlind   && listGecko01)

##f$Chart_OneLimper##
   [ InSmallBlind && listGecko06 ]  // 30%
|| [ InBigBlind && listGecko01 ]  // 13%
|| [ InMiddlePosition2 && listGecko01 ]  // 13%
|| [ InMiddlePosition3 && listGecko03 ]  // 16%
|| [ InCutOff && listGecko04 ]  // 23%
|| [ InButton && listGecko06 ]  // 30%

##f$Chart_TwoLimpers##
   (InMiddlePosition2       && listGecko01)
|| (InMiddlePosition3       && listGecko01)
|| (InCutOff     && listGecko01)
|| (InButton     && listGecko02)
|| (InSmallBlind && listGecko01)
|| (InBigBlind   && listGecko01)

##f$Chart_CallRaise##
   (InSmallBlind && listGecko09)
|| (InBigBlind   && listGecko09)

##f$real_pfr##
f$logicalpositionrais == 1 ? pt_pfr_raischair * 0.50 :
f$logicalpositionrais == 3 ? pt_pfr_raischair* 0.50 :
f$logicalpositionrais == 4 ? pt_pfr_raischair * 0.50 :
f$logicalpositionrais == 5 ? pt_pfr_raischair * 0.50 :
f$logicalpositionrais == 6 ? pt_pfr_raischair * 0.50 : 0

##f$real_pfr_range##
   f$real_pfr<=0.00                       && listGecko99
|| f$real_pfr> 0.00 && f$real_pfr <= 0.02 && listGecko10
|| f$real_pfr> 0.02 && f$real_pfr <= 0.04 && listGecko11 
|| f$real_pfr> 0.04 && f$real_pfr <= 0.07 && listGecko12 
|| f$real_pfr> 0.07 && f$real_pfr <= 0.10 && listGecko13 
|| f$real_pfr> 0.10 && f$real_pfr <= 0.14 && listGecko13 
|| f$real_pfr> 0.14 && f$real_pfr <= 0.18 && listGecko13 
|| f$real_pfr> 0.18 && f$real_pfr <= 0.22 && listGecko13 
|| f$real_pfr> 0.22 && f$real_pfr <= 0.26 && listGecko13 
|| f$real_pfr> 0.26 && f$real_pfr <= 0.30 && listGecko13 
|| f$real_pfr> 0.30                       && listGecko13 

##f$Chart_Squeeze##
   [ InBigBlind   && listGeckoSqueeze ]
|| [ InSmallBlind && listGeckoSqueeze ]
|| [ InMiddlePosition3       && listGeckoSqueeze ]
|| [ InButton && (      dealpositionrais==3 && listGeckoSqueeze
                              || dealpositionrais==4 && listGeckoSqueeze  
                              || dealpositionrais==5 && listGeckoSqueeze )] 
|| [ InCutOff && (      dealpositionrais==3 && listGeckoSqueeze
                              || dealpositionrais==4 && listGeckoSqueeze )] 
						  
##f$villain_allin##
WHEN (nopponentsplaying > 1) RETURN false FORCE
WHEN (f$stackopponent == 0) RETURN true FORCE

##f$villain_potcommitted##
WHEN (nopponentsplaying > 1) RETURN false FORCE
WHEN (f$stackopponent <= currentbet_headsupchair) RETURN true FORCE
							  
##f$committed##
[ call*10<pot ] ? f$prwin>.30 :
[ call*9 <pot ] ? f$prwin>.40 :
[ call*8 <pot ] ? f$prwin>.50 :
[ call*7 <pot ] ? f$prwin>.60 :
[ call*6 <pot ] ? f$prwin>.75 :
[ call*5 <pot ] ? f$prwin>.80 :
[ call*4 <pot ] ? f$prwin>.85 :
[ call*3 <pot ] ? f$prwin>.95 :
[ nplayersplaying==2 ] ? {
    [ f$prwin>0.65 && f$prwin<=0.70 ] ? (balance*7<pot) :
    [ f$prwin>0.70 && f$prwin<=0.75 ] ? (balance*6<pot) :
    [ f$prwin>0.75 && f$prwin<=0.80 ] ? (balance*5<pot) :
    [ f$prwin>0.80 && f$prwin<=0.85 ] ? (balance*4<pot) :
    [ f$prwin>0.85 && f$prwin<=0.90 ] ? (balance*3<pot) :
    [ f$prwin>0.90                  ] ? (balance*3<pot) :
    [ (f$villain_allin OR f$villain_potcommitted) ] ? {
        [ f$prwin>0.68 && f$prwin<=0.72 ] ? (call*7.0<pot) :
        [ f$prwin>0.72 && f$prwin<=0.76 ] ? (call*6.0<pot) :
        [ f$prwin>0.76 && f$prwin<=0.80 ] ? (call*4.0<pot) :
        [ f$prwin>0.78 && f$prwin<=0.82 ] ? (call*3.5<pot) :
        [ f$prwin>0.82 && f$prwin<=0.86 ] ? (call*3.0<pot) :
        [ f$prwin>0.86 && f$prwin<=0.90 ] ? (call*2.5<pot) : 
        [ f$prwin>0.90 && f$prwin<=0.96 ] ? (call*2.0<pot) : 
        [ f$prwin>0.96                  ] ? (call*1.0<pot) : 0 } : 0 } :
0

##f$mycurrentbet##
currentbet

##f$actionpostflop_1##
[ call<=0 ]

##f$actionpostflop_2##
[ !didbetsize && (call>0) && (call<=bblind) ]

##f$actionpostflop_3##
[ !didbetsize && (call>bblind) && (call<=(potcommon*0.8)) && !f$actionpostflop_2 ]

##f$actionpostflop_4##
[ !didbetsize && (call>(potcommon*0.8)) && (call<=(potcommon*1.2)) && !f$actionpostflop_2 ]

##f$actionpostflop_5##
[ !didbetsize && (call>(potcommon*1.2)) && !f$actionpostflop_2 ]

##f$actionpostflop_6##
[ (didbetsize||didcall) && f$mycurrentbet<=potcommon && call<=f$mycurrentbet ]

##f$actionpostflop_7##
[ (didbetsize||didcall) && (f$mycurrentbet<=potcommon) && (call>f$mycurrentbet) && (call<=(f$mycurrentbet*3.5)) ]

##f$actionpostflop_8##
[ (didbetsize||didcall) && (f$mycurrentbet<=potcommon) && (call>(f$mycurrentbet*3.5)) ]

##f$actionpostflop_9##
[ didbetsize && (f$mycurrentbet>potcommon) && (f$mycurrentbet<=potcommon*3) ]

##f$actionpostflop_10##
[ didbetsize && (f$mycurrentbet>potcommon*3) ]

##f$river_raise_wegotraised##
[ Position = First ] ? {
//  [ f$actionpostflop_1 ] ? f$prwin>.76 : // let the aggressor do the betting
    [ f$actionpostflop_2 ] ? f$prwin>.96 :
    [ f$actionpostflop_3 ] ? f$prwin>.96 :
    [ f$actionpostflop_4 ] ? f$prwin>.96 :
    [ f$actionpostflop_5 ] ? f$prwin>.96 :
    [ f$actionpostflop_6 ] ? f$prwin>.96 :
    [ f$actionpostflop_7 ] ? f$prwin>.97 :
    [ f$actionpostflop_8 ] ? f$prwin>.98 :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
[ Position = Middle ] ? {
    [ f$actionpostflop_1 ] ? f$prwin>.96 :
    [ f$actionpostflop_2 ] ? f$prwin>.90 :
    [ f$actionpostflop_3 ] ? f$prwin>.96 :
    [ f$actionpostflop_4 ] ? f$prwin>.96 :
    [ f$actionpostflop_5 ] ? f$prwin>.96 :
    [ f$actionpostflop_6 ] ? f$prwin>.96 :
    [ f$actionpostflop_7 ] ? f$prwin>.96 :
    [ f$actionpostflop_8 ] ? f$prwin>.97 :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
[ Position = Last ] ? {
    [ f$actionpostflop_1 ] ? f$prwin>.82 :
    [ f$actionpostflop_2 ] ? f$prwin>.90 :
    [ f$actionpostflop_3 ] ? f$prwin>.96 :
    [ f$actionpostflop_4 ] ? f$prwin>.96 :
    [ f$actionpostflop_5 ] ? f$prwin>.96 :
    [ f$actionpostflop_6 ] ? f$prwin>.96 :
    [ f$actionpostflop_7 ] ? f$prwin>.96 :
    [ f$actionpostflop_8 ] ? f$prwin>.97 :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
0

##f$river_call_wegotraised##
[ Position = First ] ? {
    [ f$actionpostflop_2 ] ? f$prwin1>.65 :
    [ f$actionpostflop_3 ] ? f$prwin1>.85 :
    [ f$actionpostflop_4 ] ? f$prwin1>.90 :
    [ f$actionpostflop_5 ] ? f$prwin1>.95 :
    [ f$actionpostflop_6 ] ? f$prwin1>.95 :
    [ f$actionpostflop_7 ] ? f$prwin1>.95 :
    [ f$actionpostflop_8 ] ? f$prwin1>.95 :
    [ f$actionpostflop_9 ] ? f$prwin1>.95 :
    [ f$actionpostflop_10] ? f$prwin1>.98 : 0 } :
[ Position = Middle ] ? {
    [ f$actionpostflop_2 ] ? f$prwin1>.65 :
    [ f$actionpostflop_3 ] ? f$prwin1>.90 :
    [ f$actionpostflop_4 ] ? f$prwin1>.90 :
    [ f$actionpostflop_5 ] ? f$prwin1>.95 :
    [ f$actionpostflop_6 ] ? f$prwin1>.95 :
    [ f$actionpostflop_7 ] ? f$prwin1>.95 :
    [ f$actionpostflop_8 ] ? f$prwin1>.95 :
    [ f$actionpostflop_9 ] ? f$prwin1>.95 :
    [ f$actionpostflop_10] ? f$prwin1>.98 : 0 } :
[ Position = Last ] ? {
    [ f$actionpostflop_2 ] ? f$prwin1>.65 :
    [ f$actionpostflop_3 ] ? f$prwin1>.90 :
    [ f$actionpostflop_4 ] ? f$prwin1>.90 :
    [ f$actionpostflop_5 ] ? f$prwin1>.95 :
    [ f$actionpostflop_6 ] ? f$prwin1>.95 :
    [ f$actionpostflop_7 ] ? f$prwin1>.95 :
    [ f$actionpostflop_8 ] ? f$prwin1>.95 :
    [ f$actionpostflop_9 ] ? f$prwin1>.95 :
    [ f$actionpostflop_10] ? f$prwin1>.98 : 0 } :
0

##f$turn_raise_wegotraised##
[ Position = First ] ? {
    [ nplayersplaying==2 ] ? {
    [ f$actionpostflop_1 ] ? f$prwin>.80 :
    [ f$actionpostflop_2 ] ? f$prwin>.80 :
    [ f$actionpostflop_3 ] ? f$prwin>.85 :
    [ f$actionpostflop_4 ] ? f$prwin>.85 :
    [ f$actionpostflop_5 ] ? f$prwin>.95 :
    [ f$actionpostflop_6 ] ? f$prwin>.96 :
    [ f$actionpostflop_7 ] ? f$prwin>.97 :
    [ f$actionpostflop_8 ] ? f$prwin>.98 :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
    [ nplayersplaying>=3 ] ? {
    [ f$actionpostflop_1 ] ? f$prwin>.80 :
    [ f$actionpostflop_2 ] ? f$prwin>.85 :
    [ f$actionpostflop_3 ] ? f$prwin>.95 :
    [ f$actionpostflop_4 ] ? f$prwin>.95 :
    [ f$actionpostflop_5 ] ? f$prwin>.95 :
    [ f$actionpostflop_6 ] ? f$prwin>.96 :
    [ f$actionpostflop_7 ] ? f$prwin>.97 :
    [ f$actionpostflop_8 ] ? f$prwin>.98 :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } : 0 } :
[ Position = Middle ] ? {
    [ f$actionpostflop_1 ] ? f$prwin>.96 :
    [ f$actionpostflop_2 ] ? f$prwin>.90 :
    [ f$actionpostflop_3 ] ? f$prwin>.96 :
    [ f$actionpostflop_4 ] ? f$prwin>.96 :
    [ f$actionpostflop_5 ] ? f$prwin>.96 :
    [ f$actionpostflop_6 ] ? f$prwin>.96 :
    [ f$actionpostflop_7 ] ? f$prwin>.96 :
    [ f$actionpostflop_8 ] ? f$prwin>.97 :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
[ Position = Last ] ? {
    [ f$actionpostflop_1 ] ? f$prwin>.82 :
    [ f$actionpostflop_2 ] ? f$prwin>.90 :
    [ f$actionpostflop_3 ] ? f$prwin>.96 :
    [ f$actionpostflop_4 ] ? f$prwin>.96 :
    [ f$actionpostflop_5 ] ? f$prwin>.96 :
    [ f$actionpostflop_6 ] ? f$prwin>.96 :
    [ f$actionpostflop_7 ] ? f$prwin>.96 :
    [ f$actionpostflop_8 ] ? f$prwin>.97 :
    [ f$actionpostflop_9 ] ? f$nuts      :
    [ f$actionpostflop_10] ? f$nuts      : 0 } :
0

##f$turn_call_wegotraised##
[ Position = First ] ? {
    [ f$actionpostflop_2 ] ? f$prwin1>.60 :
    [ f$actionpostflop_3 ] ? f$prwin1>.78 :
    [ f$actionpostflop_4 ] ? f$prwin1>.78 :
    [ f$actionpostflop_5 ] ? f$prwin1>.95 :
    [ f$actionpostflop_6 ] ? f$prwin1>.85 :
    [ f$actionpostflop_7 ] ? f$prwin1>.90 :
    [ f$actionpostflop_8 ] ? f$prwin1>.95 :
    [ f$actionpostflop_9 ] ? f$prwin1>.95 :
    [ f$actionpostflop_10] ? f$prwin1>.96 : 0 } :
[ Position = Middle ] ? {
    [ f$actionpostflop_2 ] ? f$prwin1>.60 :
    [ f$actionpostflop_3 ] ? f$prwin1>.77 :
    [ f$actionpostflop_4 ] ? f$prwin1>.79 :
    [ f$actionpostflop_5 ] ? f$prwin1>.95 :
    [ f$actionpostflop_6 ] ? f$prwin1>.85 :
    [ f$actionpostflop_7 ] ? f$prwin1>.90 :
    [ f$actionpostflop_8 ] ? f$prwin1>.95 :
    [ f$actionpostflop_9 ] ? f$prwin1>.95 :
    [ f$actionpostflop_10] ? f$prwin1>.96 : 0 } :
[ Position = Last ] ? {
    [ f$actionpostflop_2 ] ? f$prwin1>.60 :
    [ f$actionpostflop_3 ] ? f$prwin1>.78 :
    [ f$actionpostflop_4 ] ? f$prwin1>.80 :
    [ f$actionpostflop_5 ] ? f$prwin1>.95 :
    [ f$actionpostflop_6 ] ? f$prwin1>.85 :
    [ f$actionpostflop_7 ] ? f$prwin1>.90 :
    [ f$actionpostflop_8 ] ? f$prwin1>.95 :
    [ f$actionpostflop_9 ] ? f$prwin1>.95 :
    [ f$actionpostflop_10] ? f$prwin1>.96 : 0 } :
0

##f$Initiative_GotRaised##
IsTurn ? didbetsizeround_flop && didcallround_flop && nbetsround_flop>0 :
IsRiver ? didbetsizeround_turn && didcallround_turn && nbetsround_turn>0 : 0

##f$nuts##
   [ nhandshi<=0 ]
|| [ prwin>.97 ]

##f$2ndnuts##
[ nhandshi<=1 ]

##f$villiantakeover##
[ IsTurn && !didcallround_preflop && nbetsround_preflop>1 && !didbetsizeround_flop && didcallround_flop ] ? {
    [ f$PT_Flop_AF_RaisChair<=0.00 ] ?  0.50 :
    [ pt_hands_raischair>50 ] ? {
    [ f$PT_Flop_AF_RaisChair>0.00 && f$PT_Flop_AF_RaisChair<=0.33 ] ? 1.00 :
    [ f$PT_Flop_AF_RaisChair>0.33 && f$PT_Flop_AF_RaisChair<=0.66 ] ? 1.00 :
    [ f$PT_Flop_AF_RaisChair>0.66 && f$PT_Flop_AF_RaisChair<=1.00 ] ? 0.90 :
    [ f$PT_Flop_AF_RaisChair>1.00 && f$PT_Flop_AF_RaisChair<=1.33 ] ? 0.80 :
    [ f$PT_Flop_AF_RaisChair>1.33 && f$PT_Flop_AF_RaisChair<=1.66 ] ? 0.70 :
    [ f$PT_Flop_AF_RaisChair>1.66 && f$PT_Flop_AF_RaisChair<=2.00 ] ? 0.60 :
    [ f$PT_Flop_AF_RaisChair>2.00 && f$PT_Flop_AF_RaisChair<=2.50 ] ? 0.50 :
    [ f$PT_Flop_AF_RaisChair>2.50 && f$PT_Flop_AF_RaisChair<=3.00 ] ? 0.40 :
    [ f$PT_Flop_AF_RaisChair>3.00 && f$PT_Flop_AF_RaisChair<=4.00 ] ? 0.30 :
    [ f$PT_Flop_AF_RaisChair>4.00 && f$PT_Flop_AF_RaisChair<=5.00 ] ? 0.20 :
    [ f$PT_Flop_AF_RaisChair>5.00                   ] ? 0.10 : 0 } : 0 } :
[ IsRiver && !didcallround_preflop && nbetsround_preflop>1 && !didbetsizeround_flop && didcallround_flop ] ? {
    [ f$PT_Flop_AF_RaisChair<=0.00 ] ? 0.50 :
    [ pt_hands_raischair>50 ] ? {
    [ f$PT_Flop_AF_RaisChair>0.00 && f$PT_Flop_AF_RaisChair<=0.33 ] ? 1.00 :
    [ f$PT_Flop_AF_RaisChair>0.33 && f$PT_Flop_AF_RaisChair<=0.66 ] ? 1.00 :
    [ f$PT_Flop_AF_RaisChair>0.66 && f$PT_Flop_AF_RaisChair<=1.00 ] ? 0.90 :
    [ f$PT_Flop_AF_RaisChair>1.00 && f$PT_Flop_AF_RaisChair<=1.33 ] ? 0.80 :
    [ f$PT_Flop_AF_RaisChair>1.33 && f$PT_Flop_AF_RaisChair<=1.66 ] ? 0.70 :
    [ f$PT_Flop_AF_RaisChair>1.66 && f$PT_Flop_AF_RaisChair<=2.00 ] ? 0.60 :
    [ f$PT_Flop_AF_RaisChair>2.00 && f$PT_Flop_AF_RaisChair<=2.50 ] ? 0.50 :
    [ f$PT_Flop_AF_RaisChair>2.50 && f$PT_Flop_AF_RaisChair<=3.00 ] ? 0.40 :
    [ f$PT_Flop_AF_RaisChair>3.00 && f$PT_Flop_AF_RaisChair<=4.00 ] ? 0.30 :
    [ f$PT_Flop_AF_RaisChair>4.00 && f$PT_Flop_AF_RaisChair<=5.00 ] ? 0.20 :
    [ f$PT_Flop_AF_RaisChair>5.00                                 ] ? 0.10 : 0 } : 0 } :
0

##f$reducewinchance_when_have_twopair##
[ PairOnBoard && nplayersround_flop>2 && istwopair && trankcommon>7 && !TwoPairOnBoard ] ? 0.4 : 0

##f$betline##
[ !didcallround_preflop && nbetsround_preflop>1 && nbetsround_preflop<=7 && // raise preflop
  didbetsizeround_flop && !didcallround_flop && nbetsround_flop>0 && nbetsround_flop<12 && // cbet flop
  Position = First && !didbetsize ] // early position, did not act yet

##f$prwin1##
[prwin+(prtie/2)]**(1+f$threat)

##f$threat1##
IsFlop ? (f$AggressionFactor_Flop1+f$foldequity1+f$villiantakeover1+f$reducewinchance_when_have_twopair1)  :
IsTurn ? (f$AggressionFactor_Turn1+f$foldequity1+f$villiantakeover1+f$reducewinchance_when_have_twopair1)  :
IsRiver ? (f$AggressionFactor_River1+f$foldequity1+f$villiantakeover1+f$reducewinchance_when_have_twopair1) : 0

##f$AggressionFactor_Flop1##
[ call<=0 ] ? 0 :
[ call>0 && pt_hands_raischair>25 ] ? {
    [                    f$PT_Flop_AF_RaisChair<=0.00 ] ? 0.00 :
    [ f$PT_Flop_AF_RaisChair>0.00 && f$PT_Flop_AF_RaisChair<=0.33 ] ? 0.40 :
    [ f$PT_Flop_AF_RaisChair>0.33 && f$PT_Flop_AF_RaisChair<=0.66 ] ? 0.35 :
    [ f$PT_Flop_AF_RaisChair>0.66 && f$PT_Flop_AF_RaisChair<=1.00 ] ? 0.25 :
    [ f$PT_Flop_AF_RaisChair>1.00 && f$PT_Flop_AF_RaisChair<=1.33 ] ? 0.15 :
    [ f$PT_Flop_AF_RaisChair>1.33 && f$PT_Flop_AF_RaisChair<=1.66 ] ? 0.05 :
    [ f$PT_Flop_AF_RaisChair>1.66 && f$PT_Flop_AF_RaisChair<=2.00 ] ? 0.00 :
    [ f$PT_Flop_AF_RaisChair>2.00 && f$PT_Flop_AF_RaisChair<=2.50 ] ? 0.00 :
    [ f$PT_Flop_AF_RaisChair>2.50 && f$PT_Flop_AF_RaisChair<=3.00 ] ? 0.00 :
    [ f$PT_Flop_AF_RaisChair>3.00 && f$PT_Flop_AF_RaisChair<=4.00 ] ? 0.00 :
    [ f$PT_Flop_AF_RaisChair>4.00 && f$PT_Flop_AF_RaisChair<=5.00 ] ? 0.00 :
    [ f$PT_Flop_AF_RaisChair>5.00                     ] ? 0.00 : 0 } : 
0

##f$AggressionFactor_Turn1##
[ call<=0 ] ? {
    [ f$Initiative_Hero   ] ? 0 :
    [ f$Initiative_Nobody ] ? 0 :
    [ f$Initiative_Villian && f$pt_hands>25 ] ? {
                               f$pt_flopaf<=0.00 ? 0.00 :
        f$pt_flopaf>0.00 && f$pt_flopaf<=0.33 ? 0.50 :
        f$pt_flopaf>0.33 && f$pt_flopaf<=0.66 ? 0.40 :
        f$pt_flopaf>0.66 && f$pt_flopaf<=1.00 ? 0.30 :
        f$pt_flopaf>1.00 && f$pt_flopaf<=1.33 ? 0.20 :
        f$pt_flopaf>1.33 && f$pt_flopaf<=1.66 ? 0.10 :
        f$pt_flopaf>1.66 && f$pt_flopaf<=2.00 ? 0.00 :
        f$pt_flopaf>2.00 && f$pt_flopaf<=2.50 ? 0.00 :
        f$pt_flopaf>2.50 && f$pt_flopaf<=3.00 ? 0.00 :
        f$pt_flopaf>3.00 && f$pt_flopaf<=4.00 ? 0.00 :
        f$pt_flopaf>4.00 && f$pt_flopaf<=5.00 ? 0.00 :
        f$pt_flopaf>5.00                      ? 0.00 : 0 } : 0 } :
[ call>0 && pt_hands_raischair>25 ] ? {
  [ !didbetsize ] ? {
    [                    f$PT_Turn_AF_RaisChair<=0.00 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>0.00 && f$PT_Turn_AF_RaisChair<=0.25 ] ? 0.50 :
    [ f$PT_Turn_AF_RaisChair>0.25 && f$PT_Turn_AF_RaisChair<=0.50 ] ? 0.40 :
    [ f$PT_Turn_AF_RaisChair>0.50 && f$PT_Turn_AF_RaisChair<=0.75 ] ? 0.30 :
    [ f$PT_Turn_AF_RaisChair>0.75 && f$PT_Turn_AF_RaisChair<=1.00 ] ? 0.20 :
    [ f$PT_Turn_AF_RaisChair>1.00 && f$PT_Turn_AF_RaisChair<=1.25 ] ? 0.10 :
    [ f$PT_Turn_AF_RaisChair>1.25 && f$PT_Turn_AF_RaisChair<=1.50 ] ? 0.05 :
    [ f$PT_Turn_AF_RaisChair>1.50 && f$PT_Turn_AF_RaisChair<=1.75 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>1.75 && f$PT_Turn_AF_RaisChair<=2.00 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>2.00 && f$PT_Turn_AF_RaisChair<=2.25 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>2.25 && f$PT_Turn_AF_RaisChair<=2.50 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>2.50 && f$PT_Turn_AF_RaisChair<=3.00 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>3.00 && f$PT_Turn_AF_RaisChair<=4.00 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>4.00 && f$PT_Turn_AF_RaisChair<=5.00 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>5.00                     ] ? 0.00 : 0 } : 
  [  didbetsize ] ? {
    [                    f$PT_Turn_AF_RaisChair<=0.00 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>0.00 && f$PT_Turn_AF_RaisChair<=0.25 ] ? 1.00 :
    [ f$PT_Turn_AF_RaisChair>0.25 && f$PT_Turn_AF_RaisChair<=0.50 ] ? 0.65 :
    [ f$PT_Turn_AF_RaisChair>0.50 && f$PT_Turn_AF_RaisChair<=0.75 ] ? 0.50 :
    [ f$PT_Turn_AF_RaisChair>0.75 && f$PT_Turn_AF_RaisChair<=1.00 ] ? 0.33 :
    [ f$PT_Turn_AF_RaisChair>1.00 && f$PT_Turn_AF_RaisChair<=1.25 ] ? 0.16 :
    [ f$PT_Turn_AF_RaisChair>1.25 && f$PT_Turn_AF_RaisChair<=1.50 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>1.50 && f$PT_Turn_AF_RaisChair<=1.75 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>1.75 && f$PT_Turn_AF_RaisChair<=2.00 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>2.00 && f$PT_Turn_AF_RaisChair<=2.25 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>2.25 && f$PT_Turn_AF_RaisChair<=2.50 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>2.50 && f$PT_Turn_AF_RaisChair<=3.00 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>3.00 && f$PT_Turn_AF_RaisChair<=4.00 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>4.00 && f$PT_Turn_AF_RaisChair<=5.00 ] ? 0.00 :
    [ f$PT_Turn_AF_RaisChair>5.00                     ] ? 0.00 : 0 } : 0 } :
0

##f$AggressionFactor_River1##
[ call<=0 ] ? {
    [ f$Initiative_Hero   ] ? 0 :
    [ f$Initiative_Nobody ] ? 0 :
    [ f$Initiative_Villian && f$pt_hands>25 ] ? {
        [                        f$pt_turnaf<=0.00 ] ? 0.00 :
        [ f$pt_turnaf>0.00 && f$pt_turnaf<=0.25 ] ? 0.50 :
        [ f$pt_turnaf>0.25 && f$pt_turnaf<=0.50 ] ? 0.40 :
        [ f$pt_turnaf>0.50 && f$pt_turnaf<=0.75 ] ? 0.30 :
        [ f$pt_turnaf>0.75 && f$pt_turnaf<=1.00 ] ? 0.20 :
        [ f$pt_turnaf>1.00 && f$pt_turnaf<=1.25 ] ? 0.10 :
        [ f$pt_turnaf>1.25 && f$pt_turnaf<=1.50 ] ? 0.05 :
        [ f$pt_turnaf>1.50 && f$pt_turnaf<=1.75 ] ? 0.00 :
        [ f$pt_turnaf>1.75 && f$pt_turnaf<=2.00 ] ? 0.00 :
        [ f$pt_turnaf>2.00 && f$pt_turnaf<=2.25 ] ? 0.00 :
        [ f$pt_turnaf>2.25 && f$pt_turnaf<=2.50 ] ? 0.00 :
        [ f$pt_turnaf>2.50 && f$pt_turnaf<=3.00 ] ? 0.00 :
        [ f$pt_turnaf>3.00 && f$pt_turnaf<=4.00 ] ? 0.00 :
        [ f$pt_turnaf>4.00 && f$pt_turnaf<=5.00 ] ? 0.00 :
        [ f$pt_turnaf>5.00                         ] ? 0.00 : 0 } : 0 } :
[ call>0 && pt_hands_raischair>25 ] ? {
  [ !didbetsize ] ? {
    [                    f$PT_River_AF_RaisChair<=0.00 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>0.00 && f$PT_River_AF_RaisChair<=0.25 ] ? 0.50 :
    [ f$PT_River_AF_RaisChair>0.25 && f$PT_River_AF_RaisChair<=0.50 ] ? 0.40 :
    [ f$PT_River_AF_RaisChair>0.50 && f$PT_River_AF_RaisChair<=0.75 ] ? 0.30 :
    [ f$PT_River_AF_RaisChair>0.75 && f$PT_River_AF_RaisChair<=1.00 ] ? 0.20 :
    [ f$PT_River_AF_RaisChair>1.00 && f$PT_River_AF_RaisChair<=1.25 ] ? 0.10 :
    [ f$PT_River_AF_RaisChair>1.25 && f$PT_River_AF_RaisChair<=1.50 ] ? 0.05 :
    [ f$PT_River_AF_RaisChair>1.50 && f$PT_River_AF_RaisChair<=1.75 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>1.75 && f$PT_River_AF_RaisChair<=2.00 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>2.00 && f$PT_River_AF_RaisChair<=2.25 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>2.25 && f$PT_River_AF_RaisChair<=2.50 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>2.50 && f$PT_River_AF_RaisChair<=3.00 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>3.00 && f$PT_River_AF_RaisChair<=4.00 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>4.00 && f$PT_River_AF_RaisChair<=5.00 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>5.00                     ] ? 0.00 : 0 } : 
  [  didbetsize ] ? {
    [                    f$PT_River_AF_RaisChair<=0.00 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>0.00 && f$PT_River_AF_RaisChair<=0.25 ] ? 1.00 :
    [ f$PT_River_AF_RaisChair>0.25 && f$PT_River_AF_RaisChair<=0.50 ] ? 0.65 :
    [ f$PT_River_AF_RaisChair>0.50 && f$PT_River_AF_RaisChair<=0.75 ] ? 0.50 :
    [ f$PT_River_AF_RaisChair>0.75 && f$PT_River_AF_RaisChair<=1.00 ] ? 0.33 :
    [ f$PT_River_AF_RaisChair>1.00 && f$PT_River_AF_RaisChair<=1.25 ] ? 0.16 :
    [ f$PT_River_AF_RaisChair>1.25 && f$PT_River_AF_RaisChair<=1.50 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>1.50 && f$PT_River_AF_RaisChair<=1.75 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>1.75 && f$PT_River_AF_RaisChair<=2.00 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>2.00 && f$PT_River_AF_RaisChair<=2.25 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>2.25 && f$PT_River_AF_RaisChair<=2.50 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>2.50 && f$PT_River_AF_RaisChair<=3.00 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>3.00 && f$PT_River_AF_RaisChair<=4.00 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>4.00 && f$PT_River_AF_RaisChair<=5.00 ] ? 0.00 :
    [ f$PT_River_AF_RaisChair>5.00                     ] ? 0.00 : 0 } : 0 } :
0

##f$foldequity1##
[ f$Initiative_Nobody && nplayersplaying==2 && call==0 && f$pt_hands>50 ] ? {
    [ Position = First ] ? {
        [ IsFlop && pot<6*bblind ] ? {
            [                      f$pt_wtsd<=0.00 ] ?  0.00 :
            [ f$pt_wtsd>0.00 && f$pt_wtsd<=0.10 ] ? -0.50 :
            [ f$pt_wtsd>0.10 && f$pt_wtsd<=0.15 ] ? -0.30 :
            [ f$pt_wtsd>0.15 && f$pt_wtsd<=0.20 ] ? -0.20 :
            [ f$pt_wtsd>0.20 && f$pt_wtsd<=0.25 ] ? -0.05 :
            [ f$pt_wtsd>0.25 && f$pt_wtsd<=0.30 ] ?  0.05 :
            [ f$pt_wtsd>0.30 && f$pt_wtsd<=0.40 ] ?  0.15 :
            [ f$pt_wtsd>0.40 && f$pt_wtsd<=0.50 ] ?  0.30 :
            [ f$pt_wtsd>0.50 && f$pt_wtsd<=0.70 ] ?  0.40 :
            [ f$pt_wtsd>0.70                       ] ?  0.50 : 0 } :
        [ IsTurn && pot<12*bblind ] ? {
            [                      f$pt_wtsd<=0.00 ] ?  0.00 :
            [ f$pt_wtsd>0.00 && f$pt_wtsd<=0.10 ] ? -0.50 :
            [ f$pt_wtsd>0.10 && f$pt_wtsd<=0.15 ] ? -0.30 :
            [ f$pt_wtsd>0.15 && f$pt_wtsd<=0.20 ] ? -0.20 :
            [ f$pt_wtsd>0.20 && f$pt_wtsd<=0.25 ] ? -0.05 :
            [ f$pt_wtsd>0.25 && f$pt_wtsd<=0.30 ] ?  0.05 :
            [ f$pt_wtsd>0.30 && f$pt_wtsd<=0.40 ] ?  0.15 :
            [ f$pt_wtsd>0.40 && f$pt_wtsd<=0.50 ] ?  0.30 :
            [ f$pt_wtsd>0.50 && f$pt_wtsd<=0.70 ] ?  0.40 :
            [ f$pt_wtsd>0.70                       ] ?  0.50 : 0 } :
        [ IsRiver && !didcallround_flop && pot<32*bblind ] ? {
            [                      f$pt_wtsd<=0.00 ] ?  0.00 :
            [ f$pt_wtsd>0.00 && f$pt_wtsd<=0.10 ] ? -0.50 :
            [ f$pt_wtsd>0.10 && f$pt_wtsd<=0.15 ] ? -0.30 :
            [ f$pt_wtsd>0.15 && f$pt_wtsd<=0.20 ] ? -0.20 :
            [ f$pt_wtsd>0.20 && f$pt_wtsd<=0.25 ] ? -0.05 :
            [ f$pt_wtsd>0.25 && f$pt_wtsd<=0.30 ] ?  0.05 :
            [ f$pt_wtsd>0.30 && f$pt_wtsd<=0.40 ] ?  0.15 :
            [ f$pt_wtsd>0.40 && f$pt_wtsd<=0.50 ] ?  0.30 :
            [ f$pt_wtsd>0.50 && f$pt_wtsd<=0.70 ] ?  0.40 :
            [ f$pt_wtsd>0.70                       ] ?  0.50 : 0 } : 0 } :
    [ Position = Last ] ? {
        [ IsFlop && pot<6*bblind ] ? {
            [                      f$pt_wtsd<=0.00 ] ?  0.00 :
            [ f$pt_wtsd>0.00 && f$pt_wtsd<=0.10 ] ? -0.50 :
            [ f$pt_wtsd>0.10 && f$pt_wtsd<=0.15 ] ? -0.30 :
            [ f$pt_wtsd>0.15 && f$pt_wtsd<=0.20 ] ? -0.20 :
            [ f$pt_wtsd>0.20 && f$pt_wtsd<=0.25 ] ? -0.05 :
            [ f$pt_wtsd>0.25 && f$pt_wtsd<=0.30 ] ?  0.05 :
            [ f$pt_wtsd>0.30 && f$pt_wtsd<=0.40 ] ?  0.15 :
            [ f$pt_wtsd>0.40 && f$pt_wtsd<=0.50 ] ?  0.30 :
            [ f$pt_wtsd>0.50 && f$pt_wtsd<=0.70 ] ?  0.40 :
            [ f$pt_wtsd>0.70                       ] ?  0.50 : 0 } :
        [ IsTurn && pot<12*bblind ] ? {
            [                      f$pt_wtsd<=0.00 ] ?  0.00 :
            [ f$pt_wtsd>0.00 && f$pt_wtsd<=0.10 ] ? -0.50 :
            [ f$pt_wtsd>0.10 && f$pt_wtsd<=0.15 ] ? -0.30 :
            [ f$pt_wtsd>0.15 && f$pt_wtsd<=0.20 ] ? -0.20 :
            [ f$pt_wtsd>0.20 && f$pt_wtsd<=0.25 ] ? -0.05 :
            [ f$pt_wtsd>0.25 && f$pt_wtsd<=0.30 ] ?  0.05 :
            [ f$pt_wtsd>0.30 && f$pt_wtsd<=0.40 ] ?  0.15 :
            [ f$pt_wtsd>0.40 && f$pt_wtsd<=0.50 ] ?  0.30 :
            [ f$pt_wtsd>0.50 && f$pt_wtsd<=0.70 ] ?  0.40 :
            [ f$pt_wtsd>0.70                       ] ?  0.50 : 0 } :
        [ IsRiver && !didcallround_flop && pot<32*bblind ] ? {
            [                      f$pt_wtsd<=0.00 ] ?  0.00 :
            [ f$pt_wtsd>0.00 && f$pt_wtsd<=0.10 ] ? -0.50 :
            [ f$pt_wtsd>0.10 && f$pt_wtsd<=0.15 ] ? -0.30 :
            [ f$pt_wtsd>0.15 && f$pt_wtsd<=0.20 ] ? -0.20 :
            [ f$pt_wtsd>0.20 && f$pt_wtsd<=0.25 ] ? -0.05 :
            [ f$pt_wtsd>0.25 && f$pt_wtsd<=0.30 ] ?  0.05 :
            [ f$pt_wtsd>0.30 && f$pt_wtsd<=0.40 ] ?  0.15 :
            [ f$pt_wtsd>0.40 && f$pt_wtsd<=0.50 ] ?  0.30 :
            [ f$pt_wtsd>0.50 && f$pt_wtsd<=0.70 ] ?  0.40 :
            [ f$pt_wtsd>0.70                       ] ?  0.50 : 0 } : 0 } :
0 } :
0

##f$villiantakeover1##
[ IsTurn && !didcallround_preflop && nbetsround_preflop>1 && !didbetsizeround_flop && didcallround_flop && Position = Last ] ? {
    [ f$PT_Flop_AF_RaisChair<=0.00 ] ?  0.50 :
    [ pt_hands_raischair>50 ] ? {
    [ f$PT_Flop_AF_RaisChair>0.00 && f$PT_Flop_AF_RaisChair<=0.33 ] ? 1.00 :
    [ f$PT_Flop_AF_RaisChair>0.33 && f$PT_Flop_AF_RaisChair<=0.66 ] ? 1.00 :
    [ f$PT_Flop_AF_RaisChair>0.66 && f$PT_Flop_AF_RaisChair<=1.00 ] ? 0.90 :
    [ f$PT_Flop_AF_RaisChair>1.00 && f$PT_Flop_AF_RaisChair<=1.33 ] ? 0.80 :
    [ f$PT_Flop_AF_RaisChair>1.33 && f$PT_Flop_AF_RaisChair<=1.66 ] ? 0.70 :
    [ f$PT_Flop_AF_RaisChair>1.66 && f$PT_Flop_AF_RaisChair<=2.00 ] ? 0.60 :
    [ f$PT_Flop_AF_RaisChair>2.00 && f$PT_Flop_AF_RaisChair<=2.50 ] ? 0.50 :
    [ f$PT_Flop_AF_RaisChair>2.50 && f$PT_Flop_AF_RaisChair<=3.00 ] ? 0.40 :
    [ f$PT_Flop_AF_RaisChair>3.00 && f$PT_Flop_AF_RaisChair<=4.00 ] ? 0.30 :
    [ f$PT_Flop_AF_RaisChair>4.00 && f$PT_Flop_AF_RaisChair<=5.00 ] ? 0.20 :
    [ f$PT_Flop_AF_RaisChair>5.00                   ] ? 0.10 : 0 } : 0 } :
[ IsRiver && !didcallround_preflop && nbetsround_preflop>1 && !didbetsizeround_flop && didcallround_flop && nbetsround_turn>0 && Position = Last ] ? {
    [ f$PT_Flop_AF_RaisChair<=0.00 ] ? 0.50 :
    [ pt_hands_raischair>50 ] ? {
    [ f$PT_Flop_AF_RaisChair>0.00 && f$PT_Flop_AF_RaisChair<=0.33 ] ? 1.00 :
    [ f$PT_Flop_AF_RaisChair>0.33 && f$PT_Flop_AF_RaisChair<=0.66 ] ? 1.00 :
    [ f$PT_Flop_AF_RaisChair>0.66 && f$PT_Flop_AF_RaisChair<=1.00 ] ? 0.90 :
    [ f$PT_Flop_AF_RaisChair>1.00 && f$PT_Flop_AF_RaisChair<=1.33 ] ? 0.80 :
    [ f$PT_Flop_AF_RaisChair>1.33 && f$PT_Flop_AF_RaisChair<=1.66 ] ? 0.70 :
    [ f$PT_Flop_AF_RaisChair>1.66 && f$PT_Flop_AF_RaisChair<=2.00 ] ? 0.60 :
    [ f$PT_Flop_AF_RaisChair>2.00 && f$PT_Flop_AF_RaisChair<=2.50 ] ? 0.50 :
    [ f$PT_Flop_AF_RaisChair>2.50 && f$PT_Flop_AF_RaisChair<=3.00 ] ? 0.40 :
    [ f$PT_Flop_AF_RaisChair>3.00 && f$PT_Flop_AF_RaisChair<=4.00 ] ? 0.30 :
    [ f$PT_Flop_AF_RaisChair>4.00 && f$PT_Flop_AF_RaisChair<=5.00 ] ? 0.20 :
    [ f$PT_Flop_AF_RaisChair>5.00                   ] ? 0.10 : 0 } : 0 } :
0

##f$reducewinchance_when_have_twopair1##
[ PairOnBoard && istwopair && nplayersround_flop>2 && trankcommon>7 && !TwoPairOnBoard ] ? 0.4 : 0

##f$bluffformula##
nplayersplaying==2 && nplayersround_flop<4 && nbetsround_flop<12 && !didcallround_flop ? {
f$pt_vpip>0.12 && f$pt_vpip<=0.25 ? {
    f$pt_wtsd>0.00 && f$pt_wtsd<=0.20 ? 3 :
    f$pt_wtsd>0.20 && f$pt_wtsd<=0.25 ? 1 : 0 } :
f$pt_vpip>0.25 && f$pt_vpip<=0.50 ? {
    f$pt_wtsd>0.00 && f$pt_wtsd<=0.20 ? 3 :
    f$pt_wtsd>0.20 && f$pt_wtsd<=0.25 ? 2 : 0 } :
f$pt_vpip>0.50 && f$pt_wtsd>0 && f$pt_wtsd<0.25 ? 3 : 
0 } :
0

##f$ptype_ubernit##
WHEN pt_hands_raischair < f$pt_min_hands_for_opponent_modelling RETURN false FORCE
// PT AUTORATE ICONS
WHEN (f$pt_icon_raischair==1)  RETURN true FORCE
WHEN (f$pt_icon_raischair==5)  RETURN true FORCE
WHEN (f$pt_icon_raischair==10) RETURN true FORCE

##f$ptype_nit##
WHEN pt_hands_raischair < f$pt_min_hands_for_opponent_modelling RETURN false FORCE
// PT AUTORATE ICONS
WHEN (f$pt_icon_raischair==1)  RETURN true FORCE
WHEN (f$pt_icon_raischair==6)  RETURN true FORCE
WHEN (f$pt_icon_raischair==11) RETURN true FORCE

##f$ptype_tag##
WHEN pt_hands_raischair < f$pt_min_hands_for_opponent_modelling RETURN false FORCE
// PT AUTORATE ICONS
WHEN (f$pt_icon_raischair==2)  RETURN true FORCE
WHEN (f$pt_icon_raischair==7)  RETURN true FORCE
WHEN (f$pt_icon_raischair==12) RETURN true FORCE

##f$ptype_semilag##
WHEN pt_hands_raischair < f$pt_min_hands_for_opponent_modelling RETURN false FORCE
// PT AUTORATE ICONS
WHEN (f$pt_icon_raischair==3)  RETURN true FORCE
WHEN (f$pt_icon_raischair==8)  RETURN true FORCE
WHEN (f$pt_icon_raischair==13) RETURN true FORCE

##f$ptype_lag##
WHEN pt_hands_raischair < f$pt_min_hands_for_opponent_modelling RETURN false FORCE
// PT AUTORATE ICONS
WHEN (f$pt_icon_raischair==4)  RETURN true FORCE
WHEN (f$pt_icon_raischair==9)  RETURN true FORCE
WHEN (f$pt_icon_raischair==14) RETURN true FORCE

##f$prwin2##
[prwin+(prtie/2)]**(1+f$threat2)

##f$threat2##
IsFlop ? (f$foldequity+f$reducewinchance_when_have_twopair) : 0

##f$AggressionFactor_Turn2##
pt_turn_af_headsupchair * pt_wtsd_headsupchair * 4

##f$safeboard1##
[ NOT PairOnBoard && nsuitedcommon<=2 && nstraightcommon<=2 ]

##f$fold2cbet_normal##
// Fold normaal
(f$pt_icon_headsupchair==10) ? 1 :
(f$pt_icon_headsupchair==11) ? 1 :
(f$pt_icon_headsupchair==12) ? 1 :
(f$pt_icon_headsupchair==13) ? 1 :
(f$pt_icon_headsupchair==14) ? 1 : 0

##f$fold2cbet_veel##
// Fold veel
(f$pt_icon_headsupchair<=0) ? 1 :
(f$pt_icon_headsupchair==1) ? 1 :
(f$pt_icon_headsupchair==2) ? 1 :
(f$pt_icon_headsupchair==3) ? 1 :
(f$pt_icon_headsupchair==4) ? 1 : 0

##f$fold2cbet_weinig##
// Fold weinig
(f$pt_icon_headsupchair==5) ? 1 :
(f$pt_icon_headsupchair==6) ? 1 :
(f$pt_icon_headsupchair==7) ? 1 :
(f$pt_icon_headsupchair==8) ? 1 :
(f$pt_icon_headsupchair==9) ? 1 : 0

//*****************************************************************************
//
// PokerTracker-auto-rate-icon
//
// (pt_icon rebuild with functions for all chairs, 
//  no longer directly supported by PT)
//
//*****************************************************************************
// 
// POKERTRACKER AUTORATE ICONS:
//
// ptubernit1: raise flop <6% - fold to cbet <40%
// ptubernit5: raise flop <6% - fold to cbet >40% <60%
// ptubernit9: raise flop <6% - fold to cbet >60%
// 
// ptnit2: raise flop >6% raiseflop <12% - fold to cbet <40%
// ptnit6: raise flop >6% raiseflop <12% - fold to cbet >40% <60%
// ptnit10: raise flop >6% raiseflop <12% - fold to cbet >60%
// 
// pttag3: raise flop >12% raiseflop <18% - fold to cbet <40%
// pttag7: raise flop >12% raiseflop <18% - fold to cbet >40% <60%
// pttag11: raise flop >12% raiseflop <18% - fold to cbet >60%
// 
// pttag4: raise flop >18% - fold to cbet <40%
// pttag8: raise flop >18% - fold to cbet >40% <60%
// pttag12: raise flop >18%- fold to cbet >60%
//
//*****************************************************************************

##f$pt_icon0##
WHEN pt_flop_raise_cbet0 > 0.18
   WHEN pt_flop_fold_to_cbet0 < 0.40 RETURN 1 FORCE
   WHEN pt_flop_fold_to_cbet0 > 0.60 RETURN 9 FORCE
   WHEN Others RETURN 5 FORCE
WHEN pt_flop_raise_cbet0 > 0.12
   WHEN pt_flop_fold_to_cbet0 < 0.40 RETURN 2 FORCE
   WHEN pt_flop_fold_to_cbet0 > 0.60 RETURN 10 FORCE
   WHEN Others RETURN 6 FORCE
WHEN pt_flop_raise_cbet0 > 0.06
   WHEN pt_flop_fold_to_cbet0 < 0.40 RETURN 3 FORCE
   WHEN pt_flop_fold_to_cbet0 > 0.60 RETURN 11 FORCE
   WHEN Others RETURN 7 FORCE
WHEN Others
   WHEN pt_flop_fold_to_cbet0 < 0.40 RETURN 4 FORCE
   WHEN pt_flop_fold_to_cbet0 > 0.60 RETURN 12 FORCE
   WHEN Others RETURN 8 FORCE

##f$pt_icon1##
WHEN pt_flop_raise_cbet1 > 0.18
   WHEN pt_flop_fold_to_cbet1 < 0.40 RETURN 1 FORCE
   WHEN pt_flop_fold_to_cbet1 > 0.60 RETURN 9 FORCE
   WHEN Others RETURN 5 FORCE
WHEN pt_flop_raise_cbet1 > 0.12
   WHEN pt_flop_fold_to_cbet1 < 0.40 RETURN 2 FORCE
   WHEN pt_flop_fold_to_cbet1 > 0.60 RETURN 10 FORCE
   WHEN Others RETURN 6 FORCE
WHEN pt_flop_raise_cbet1 > 0.06
   WHEN pt_flop_fold_to_cbet1 < 0.40 RETURN 3 FORCE
   WHEN pt_flop_fold_to_cbet1 > 0.60 RETURN 11 FORCE
   WHEN Others RETURN 7 FORCE
WHEN Others
   WHEN pt_flop_fold_to_cbet1 < 0.40 RETURN 4 FORCE
   WHEN pt_flop_fold_to_cbet1 > 0.60 RETURN 12 FORCE
   WHEN Others RETURN 8 FORCE
   
##f$pt_icon2##
WHEN pt_flop_raise_cbet2 > 0.18
   WHEN pt_flop_fold_to_cbet2 < 0.40 RETURN 1 FORCE
   WHEN pt_flop_fold_to_cbet2 > 0.60 RETURN 9 FORCE
   WHEN Others RETURN 5 FORCE
WHEN pt_flop_raise_cbet2 > 0.12
   WHEN pt_flop_fold_to_cbet2 < 0.40 RETURN 2 FORCE
   WHEN pt_flop_fold_to_cbet2 > 0.60 RETURN 10 FORCE
   WHEN Others RETURN 6 FORCE
WHEN pt_flop_raise_cbet2 > 0.06
   WHEN pt_flop_fold_to_cbet2 < 0.40 RETURN 3 FORCE
   WHEN pt_flop_fold_to_cbet2 > 0.60 RETURN 11 FORCE
   WHEN Others RETURN 7 FORCE
WHEN Others
   WHEN pt_flop_fold_to_cbet2 < 0.40 RETURN 4 FORCE
   WHEN pt_flop_fold_to_cbet2 > 0.60 RETURN 12 FORCE
   WHEN Others RETURN 8 FORCE
   
##f$pt_icon3##
WHEN pt_flop_raise_cbet3 > 0.18
   WHEN pt_flop_fold_to_cbet3 < 0.40 RETURN 1 FORCE
   WHEN pt_flop_fold_to_cbet3 > 0.60 RETURN 9 FORCE
   WHEN Others RETURN 5 FORCE
WHEN pt_flop_raise_cbet3 > 0.12
   WHEN pt_flop_fold_to_cbet3 < 0.40 RETURN 2 FORCE
   WHEN pt_flop_fold_to_cbet3 > 0.60 RETURN 10 FORCE
   WHEN Others RETURN 6 FORCE
WHEN pt_flop_raise_cbet3 > 0.06
   WHEN pt_flop_fold_to_cbet3 < 0.40 RETURN 3 FORCE
   WHEN pt_flop_fold_to_cbet3 > 0.60 RETURN 11 FORCE
   WHEN Others RETURN 7 FORCE
WHEN Others
   WHEN pt_flop_fold_to_cbet3 < 0.40 RETURN 4 FORCE
   WHEN pt_flop_fold_to_cbet3 > 0.60 RETURN 12 FORCE
   WHEN Others RETURN 8 FORCE
   
##f$pt_icon4##
WHEN pt_flop_raise_cbet4 > 0.18
   WHEN pt_flop_fold_to_cbet4 < 0.40 RETURN 1 FORCE
   WHEN pt_flop_fold_to_cbet4 > 0.60 RETURN 9 FORCE
   WHEN Others RETURN 5 FORCE
WHEN pt_flop_raise_cbet4 > 0.12
   WHEN pt_flop_fold_to_cbet4 < 0.40 RETURN 2 FORCE
   WHEN pt_flop_fold_to_cbet4 > 0.60 RETURN 10 FORCE
   WHEN Others RETURN 6 FORCE
WHEN pt_flop_raise_cbet4 > 0.06
   WHEN pt_flop_fold_to_cbet4 < 0.40 RETURN 3 FORCE
   WHEN pt_flop_fold_to_cbet4 > 0.60 RETURN 11 FORCE
   WHEN Others RETURN 7 FORCE
WHEN Others
   WHEN pt_flop_fold_to_cbet4 < 0.40 RETURN 4 FORCE
   WHEN pt_flop_fold_to_cbet4 > 0.60 RETURN 12 FORCE
   WHEN Others RETURN 8 FORCE
   
##f$pt_icon5##
WHEN pt_flop_raise_cbet5 > 0.18
   WHEN pt_flop_fold_to_cbet5 < 0.40 RETURN 1 FORCE
   WHEN pt_flop_fold_to_cbet5 > 0.60 RETURN 9 FORCE
   WHEN Others RETURN 5 FORCE
WHEN pt_flop_raise_cbet5 > 0.12
   WHEN pt_flop_fold_to_cbet5 < 0.40 RETURN 2 FORCE
   WHEN pt_flop_fold_to_cbet5 > 0.60 RETURN 10 FORCE
   WHEN Others RETURN 6 FORCE
WHEN pt_flop_raise_cbet5 > 0.06
   WHEN pt_flop_fold_to_cbet5 < 0.40 RETURN 3 FORCE
   WHEN pt_flop_fold_to_cbet5 > 0.60 RETURN 11 FORCE
   WHEN Others RETURN 7 FORCE
WHEN Others
   WHEN pt_flop_fold_to_cbet5 < 0.40 RETURN 4 FORCE
   WHEN pt_flop_fold_to_cbet5 > 0.60 RETURN 12 FORCE
   WHEN Others RETURN 8 FORCE
   
##f$pt_icon6##
WHEN pt_flop_raise_cbet6 > 0.18
   WHEN pt_flop_fold_to_cbet6 < 0.40 RETURN 1 FORCE
   WHEN pt_flop_fold_to_cbet6 > 0.60 RETURN 9 FORCE
   WHEN Others RETURN 5 FORCE
WHEN pt_flop_raise_cbet6 > 0.12
   WHEN pt_flop_fold_to_cbet6 < 0.40 RETURN 2 FORCE
   WHEN pt_flop_fold_to_cbet6 > 0.60 RETURN 10 FORCE
   WHEN Others RETURN 6 FORCE
WHEN pt_flop_raise_cbet6 > 0.06
   WHEN pt_flop_fold_to_cbet6 < 0.40 RETURN 3 FORCE
   WHEN pt_flop_fold_to_cbet6 > 0.60 RETURN 11 FORCE
   WHEN Others RETURN 7 FORCE
WHEN Others
   WHEN pt_flop_fold_to_cbet6 < 0.40 RETURN 4 FORCE
   WHEN pt_flop_fold_to_cbet6 > 0.60 RETURN 12 FORCE
   WHEN Others RETURN 8 FORCE
   
##f$pt_icon7##
WHEN pt_flop_raise_cbet7 > 0.18
   WHEN pt_flop_fold_to_cbet7 < 0.40 RETURN 1 FORCE
   WHEN pt_flop_fold_to_cbet7 > 0.60 RETURN 9 FORCE
   WHEN Others RETURN 5 FORCE
WHEN pt_flop_raise_cbet7 > 0.12
   WHEN pt_flop_fold_to_cbet7 < 0.40 RETURN 2 FORCE
   WHEN pt_flop_fold_to_cbet7 > 0.60 RETURN 10 FORCE
   WHEN Others RETURN 6 FORCE
WHEN pt_flop_raise_cbet7 > 0.06
   WHEN pt_flop_fold_to_cbet7 < 0.40 RETURN 3 FORCE
   WHEN pt_flop_fold_to_cbet7 > 0.60 RETURN 11 FORCE
   WHEN Others RETURN 7 FORCE
WHEN Others
   WHEN pt_flop_fold_to_cbet7 < 0.40 RETURN 4 FORCE
   WHEN pt_flop_fold_to_cbet7 > 0.60 RETURN 12 FORCE
   WHEN Others RETURN 8 FORCE
   
##f$pt_icon8##
WHEN pt_flop_raise_cbet8 > 0.18
   WHEN pt_flop_fold_to_cbet8 < 0.40 RETURN 1 FORCE
   WHEN pt_flop_fold_to_cbet8 > 0.60 RETURN 9 FORCE
   WHEN Others RETURN 5 FORCE
WHEN pt_flop_raise_cbet8 > 0.12
   WHEN pt_flop_fold_to_cbet8 < 0.40 RETURN 2 FORCE
   WHEN pt_flop_fold_to_cbet8 > 0.60 RETURN 10 FORCE
   WHEN Others RETURN 6 FORCE
WHEN pt_flop_raise_cbet8 > 0.06
   WHEN pt_flop_fold_to_cbet8 < 0.40 RETURN 3 FORCE
   WHEN pt_flop_fold_to_cbet8 > 0.60 RETURN 11 FORCE
   WHEN Others RETURN 7 FORCE
WHEN Others
   WHEN pt_flop_fold_to_cbet8 < 0.40 RETURN 4 FORCE
   WHEN pt_flop_fold_to_cbet8 > 0.60 RETURN 12 FORCE
   WHEN Others RETURN 8 FORCE
   
##f$pt_icon9##
WHEN pt_flop_raise_cbet9 > 0.18
   WHEN pt_flop_fold_to_cbet9 < 0.40 RETURN 1 FORCE
   WHEN pt_flop_fold_to_cbet9 > 0.60 RETURN 9 FORCE
   WHEN Others RETURN 5 FORCE
WHEN pt_flop_raise_cbet9 > 0.12
   WHEN pt_flop_fold_to_cbet9 < 0.40 RETURN 2 FORCE
   WHEN pt_flop_fold_to_cbet9 > 0.60 RETURN 10 FORCE
   WHEN Others RETURN 6 FORCE
WHEN pt_flop_raise_cbet9 > 0.06
   WHEN pt_flop_fold_to_cbet9 < 0.40 RETURN 3 FORCE
   WHEN pt_flop_fold_to_cbet9 > 0.60 RETURN 11 FORCE
   WHEN Others RETURN 7 FORCE
WHEN Others
   WHEN pt_flop_fold_to_cbet9 < 0.40 RETURN 4 FORCE
   WHEN pt_flop_fold_to_cbet9 > 0.60 RETURN 12 FORCE
   WHEN Others RETURN 8 FORCE
   
//*****************************************************************************
//
// Hand-lists for the Gecko-bot
//
//*****************************************************************************

##listGecko01##
66  77  88  99  TT  JJ  QQ  KK  AA  
ATs AJs AQs AKs KQs QJs JTs  
AJo  AQo AKo

##listGecko02##
22  33  44  55  66  77  88  99  TT  JJ  QQ  KK  AA  
A9s ATs AJs AQs AKs  
KTs KJs KQs  
QJs  
JTs  
T9s  
98s  
ATo  AJo AQo AKo 
KJo  KQo  

##listGecko03##
22  33  44  55  66  77  88  99  TT  JJ  QQ  KK  AA  
A2s A3s A4s A5s A6s A7s A8s A9s ATs AJs AQs AKs  
KJs KQs  
QTs QJs  
JTs  
T9s  
98s  
ATo  AJo AQo AKo 
KQo 

##listGecko04##
22  33  44  55  66  77  88  99  TT  JJ  QQ  KK  AA  
A5s A6s A7s A8s A9s ATs AJs AQs AKs  
K9s KTs KJs KQs  
Q9s QTs QJs  
J8s J9s JTs  
T8s T9s  
98s  
87s  
76s  
65s  
A9o  ATo AJo AQo AKo 
KTo  KJo  KQo  
QTo  QJo  
JTo 

##listGecko05##
22  33  44  55  66  77  88  99  TT  JJ  QQ  KK  AA  
A2s A3s A4s A5s A6s A7s A8s A9s ATs AJs AQs AKs  
K8s K9s KTs KJs KQs  
Q9s QTs QJs  
J8s J9s JTs  
T8s T9s  
97s 98s  
87s  
76s  
65s  
54s  
A8o  A9o ATo AJo AQo AKo 
K9o  KTo  KJo  KQo  
QTo  QJo  
JTo 

##listGeckoMultipleRaisers##
AA  KK  QQ  

##listGeckoSqueeze##
AA  KK  QQ  

##listGeckoSingleRaiserBehindUs##
AA  KK  QQ  
AKs
AKo

##listGeckoMultipleRaisersBehindUs##
AA  KK  QQ  

##listGecko11##
KK  AA  QQ  

##listGecko12##
KK  AA  QQ  
AKs  
AKo

##listGecko13##
KK  AA  QQ  JJ  TT  
AKs  
AKo

##listGecko14##
KK  AA  QQ  JJ  TT  99  88  
AKs AQs  
AKo

##listGecko15##
KK  AA  QQ  JJ  TT  99  88  77  
AKs AQs AJs ATs  
AKo AQo AJo 
KQs  

##listGecko06##
22  33  44  55  66  77  88  99  TT  JJ  QQ  KK  AA  
A2s A3s A4s A5s A6s A7s A8s A9s ATs AJs AQs AKs  
K7s K8s K9s KTs KJs KQs  
Q8s Q9s QTs QJs  
J8s J9s JTs  
T8s T9s  
97s 98s  
87s  
76s  
65s  
54s  
A6o  A7o A8o A9o ATo AJo AQo AKo 
K8o  K9o  KTo  KJo  KQo  
QTo  QJo  
JTo 

##listGecko07##
22  33  44  55  66  77  88  99  TT  JJ  QQ  KK  AA  
A2s A3s A4s A5s A6s A7s A8s A9s ATs AJs AQs AKs  
K7s K8s K9s KTs KJs KQs  
Q8s Q9s QTs QJs  
J8s J9s JTs  
T7s T8s T9s  
96s 97s 98s  
86s 87s  
75s 76s  
64s 65s  
54s  
A5o  A6o A7o A8o A9o ATo AJo AQo AKo 
K9o  KTo  KJo  KQo  
Q9o  QTo  QJo  
J9o  JTo  
T9o  

##listGecko10##
KK  AA  

##listGeckoSetMining##
KK  AA  QQ  JJ  TT  99  88  77  66  55  44  33  22  
AQs AKs  
AKo  
KQs

##listGecko99##
QQ  KK  AA  
AKs  
AKo

##listGecko09##
88  99  TT  JJ  QQ  KK  AA  
AJs AQs AKs  
KQs  
AKo AQo 

##listGeckoLimpMultiway##
AA  KK  QQ  JJ  TT  99  88  77  66  55  44  33  22  
AKs KQs QJs JTs T9s 98s 87s 76s 65s  
AQs AJs ATs A9s A8s A7s A6s A5s A4s A3s A2s KJs KTs QTs J9s 
AKo AQo AJo ATo 

##listGeckoLimpAgainstOneOpponent##
AA  KK  QQ  JJ  TT  99  88  77  
AKs KQs QJs JTs T9s 98s 
AQs AJs ATs A9s A8s A7s A6s A5s A4s A3s A2s KJs KTs QTs 
AKo AQo AJo ATo 

##listGecko900##
22  33  44  55  66  77  88  99  TT  JJ  QQ  KK  AA  
A2s A3s A4s A5s A6s A7s A8s A9s ATs AJs AQs AKs  
K2s K3s K4s K5s K6s K7s K8s K9s KTs KJs KQs  
Q2s Q3s Q4s Q5s Q6s Q7s Q8s Q9s QTs QJs  
J6s J7s J8s J9s JTs  
T5s T6s T7s T8s T9s  
95s 96s 97s 98s  
85s 86s 87s  
75s 76s  
64s 65s  
54s  
43s  
32s  
A2o A3o A4o A5o A6o A7o A8o A9o ATo AJo AQo AKo 
K2o K3o  K4o  K5o  K6o  K7o  K8o  K9o  KTo  KJo  KQo  
Q2o Q3o  Q4o  Q5o  Q6o  Q7o  Q8o  Q9o  QTo  QJo  
J7o  J8o  J9o  JTo
T7o  T8o  T9o  
97o 98o  
87o  
76o 

##listGecko_OpenRaise_MP1##
// Ranges for MP1, EP3 and EP2 taken from http://www.exceptionalpoker.com/?p=225
// which sounds reasonable, as MP1 is slightly tighter than Geckos MP2-range
88  99  TT  JJ  QQ  KK  AA
A9s ATs AJs AQs AKs 
KTs KJs KQs
QJs
AJo AQo AKo 

##listGecko_OpenRaise_EP3##
// Ranges for MP1, EP3 and EP2 taken from http://www.exceptionalpoker.com/?p=225
// which sounds reasonable, as MP1 is slightly tighter than Geckos MP2-range
88  99  TT  JJ  QQ  KK  AA
ATS AJS AQS AKS 
KTS KJS KQS
QJs
AQo AKo 

##listGecko_OpenRaise_EP2##
// Ranges for MP1, EP3 and EP2 taken from http://www.exceptionalpoker.com/?p=225
// which sounds reasonable, as MP1 is slightly tighter than Geckos MP2-range
88  99  TT  JJ  QQ  KK  AA
ATS AJS AQS AKS 
KJS KQS
AQo AKo 

##listGecko_OpenRaise_EP1##
// List for EP1 made up on my own ;-)
TT  JJ  QQ  KK  AA
AQS AKS 
KQS
AQo AKo